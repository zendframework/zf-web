/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.drawing.ui.Button"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.drawing.ui.Button"]){_4._hasResource["dojox.drawing.ui.Button"]=true;_4.provide("dojox.drawing.ui.Button");_6.drawing.ui.Button=_6.drawing.util.oo.declare(function(_7){_7.subShape=true;_4.mixin(this,_7);this.width=_7.data.width;this.height=_7.data.height;this.id=this.id||this.util.uid(this.type);this.util.attr(this.container,"id",this.id);if(this.callback){this.hitched=_4.hitch(this.scope||window,this.callback,this);}this.shape=new _6.drawing.stencil.Rect(_7);var _8=function(s,p,v){_4.forEach(["norm","over","down","selected"],function(nm){s[nm].fill[p]=v;});};_8(this.style.button,"y2",this.data.height+this.data.y);_8(this.style.button,"y1",this.data.y);if(_7.icon&&!_7.icon.text){var _9=this.drawing.getConstructor(_7.icon.type);var o=this.makeOptions(_7.icon);o.data=_4.mixin(o.data,this.style.button.icon.norm);if(o.data&&o.data.borderWidth===0){o.data.fill=this.style.button.icon.norm.fill=o.data.color;}else{if(_7.icon.type=="line"||(_7.icon.type=="path"&&!_7.icon.closePath)){this.style.button.icon.selected.color=this.style.button.icon.selected.fill;}else{}}this.icon=new _9(o);}else{if(_7.text||_7.icon.text){var o=this.makeOptions(_7.text||_7.icon.text);o.data.color=this.style.button.icon.norm.color;this.style.button.icon.selected.color=this.style.button.icon.selected.fill;this.icon=new _6.drawing.stencil.Text(o);this.icon.attr({height:this.icon._lineHeight,y:((this.data.height-this.icon._lineHeight)/2)+this.data.y});}}var c=this.drawing.getConstructor(this.toolType);if(c){this.drawing.addUI("tooltip",{data:{text:c.setup.tooltip},button:this});}this.onOut();},{callback:null,scope:null,hitched:null,toolType:"",onClick:function(_a){},makeOptions:function(d,s){s=s||1;d=_4.clone(d);var o={util:this.util,mouse:this.mouse,container:this.container,subShape:true};if(typeof (d)=="string"){o.data={x:this.data.x-5,y:this.data.y+2,width:this.data.width,height:this.data.height,text:d,makeFit:true};}else{if(d.points){_4.forEach(d.points,function(pt){pt.x=pt.x*this.data.width*0.01*s+this.data.x;pt.y=pt.y*this.data.height*0.01*s+this.data.y;},this);o.data={};for(var n in d){if(n!="points"){o.data[n]=d[n];}}o.points=d.points;}else{for(var n in d){if(/x|width/.test(n)){d[n]=d[n]*this.data.width*0.01*s;}else{if(/y|height/.test(n)){d[n]=d[n]*this.data.height*0.01*s;}}if(/x/.test(n)&&!/r/.test(n)){d[n]+=this.data.x;}else{if(/y/.test(n)&&!/r/.test(n)){d[n]+=this.data.y;}}}delete d.type;o.data=d;}}o.drawingType="ui";return o;if(d.borderWidth!==undefined){o.data.borderWidth=d.borderWidth;}return o;},enabled:true,selected:false,type:"drawing.library.UI.Button",select:function(){this.selected=true;this.icon.attr(this.style.button.icon.selected);this._change(this.style.button.selected);this.shape.shadow&&this.shape.shadow.hide();},deselect:function(){this.selected=false;this.icon.attr(this.style.button.icon.norm);this.shape.shadow&&this.shape.shadow.show();this._change(this.style.button.norm);},_change:function(_b){this.shape.attr(_b);this.shape.shadow&&this.shape.shadow.container.moveToBack();this.icon.shape.moveToFront();},onOver:function(){if(this.selected){return;}this._change(this.style.button.over);},onOut:function(){if(this.selected){return;}this._change(this.style.button.norm);},onDown:function(){if(this.selected){return;}this._change(this.style.button.selected);},onUp:function(){this._change(this.style.button.over);if(this.hitched){this.hitched();}this.onClick(this);}});_6.drawing.register({name:"dojox.drawing.ui.Button"},"stencil");}}};});