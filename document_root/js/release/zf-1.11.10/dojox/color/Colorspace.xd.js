/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.color.Colorspace"],["require","dojox.math.matrix"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.color.Colorspace"]){_4._hasResource["dojox.color.Colorspace"]=true;_4.provide("dojox.color.Colorspace");_4.require("dojox.math.matrix");_6.color.Colorspace=new (function(){var _7=_6.color;var _8=_6.math.matrix;var _9=this;var _a={"2":{"E":{x:1/3,y:1/3,t:5400},"D50":{x:0.34567,y:0.3585,t:5000},"D55":{x:0.33242,y:0.34743,t:5500},"D65":{x:0.31271,y:0.32902,t:6500},"D75":{x:0.29902,y:0.31485,t:7500},"A":{x:0.44757,y:0.40745,t:2856},"B":{x:0.34842,y:0.35161,t:4874},"C":{x:0.31006,y:0.31616,t:6774},"9300":{x:0.2848,y:0.2932,t:9300},"F2":{x:0.37207,y:0.37512,t:4200},"F7":{x:0.31285,y:0.32918,t:6500},"F11":{x:0.38054,y:0.37691,t:4000}},"10":{"E":{x:1/3,y:1/3,t:5400},"D50":{x:0.34773,y:0.35952,t:5000},"D55":{x:0.33411,y:0.34877,t:5500},"D65":{x:0.31382,y:0.331,t:6500},"D75":{x:0.29968,y:0.3174,t:7500},"A":{x:0.45117,y:0.40594,t:2856},"B":{x:0.3498,y:0.3527,t:4874},"C":{x:0.31039,y:0.31905,t:6774},"F2":{x:0.37928,y:0.36723,t:4200},"F7":{x:0.31565,y:0.32951,t:6500},"F11":{x:0.38543,y:0.3711,t:4000}}};var _b={"Adobe RGB 98":[2.2,"D65",0.64,0.33,0.297361,0.21,0.71,0.627355,0.15,0.06,0.075285],"Apple RGB":[1.8,"D65",0.625,0.34,0.244634,0.28,0.595,0.672034,0.155,0.07,0.083332],"Best RGB":[2.2,"D50",0.7347,0.2653,0.228457,0.215,0.775,0.737352,0.13,0.035,0.034191],"Beta RGB":[2.2,"D50",0.6888,0.3112,0.303273,0.1986,0.7551,0.663786,0.1265,0.0352,0.032941],"Bruce RGB":[2.2,"D65",0.64,0.33,0.240995,0.28,0.65,0.683554,0.15,0.06,0.075452],"CIE RGB":[2.2,"E",0.735,0.265,0.176204,0.274,0.717,0.812985,0.167,0.009,0.010811],"ColorMatch RGB":[1.8,"D50",0.63,0.34,0.274884,0.295,0.605,0.658132,0.15,0.075,0.066985],"DON RGB 4":[2.2,"D50",0.696,0.3,0.27835,0.215,0.765,0.68797,0.13,0.035,0.03368],"ECI RGB":[1.8,"D50",0.67,0.33,0.32025,0.21,0.71,0.602071,0.14,0.08,0.077679],"EktaSpace PS5":[2.2,"D50",0.695,0.305,0.260629,0.26,0.7,0.734946,0.11,0.005,0.004425],"NTSC RGB":[2.2,"C",0.67,0.33,0.298839,0.21,0.71,0.586811,0.14,0.08,0.11435],"PAL/SECAM RGB":[2.2,"D65",0.64,0.33,0.222021,0.29,0.6,0.706645,0.15,0.06,0.071334],"Pro Photo RGB":[1.8,"D50",0.7347,0.2653,0.28804,0.1596,0.8404,0.711874,0.0366,0.0001,0.000086],"SMPTE/C RGB":[2.2,"D65",0.63,0.34,0.212395,0.31,0.595,0.701049,0.155,0.07,0.086556],"sRGB":[2.2,"D65",0.64,0.33,0.212656,0.3,0.6,0.715158,0.15,0.06,0.072186],"Wide Gamut RGB":[2.2,"D50",0.735,0.265,0.258187,0.115,0.826,0.724938,0.157,0.018,0.016875]};var _c={"XYZ scaling":{ma:[[1,0,0],[0,1,0],[0,0,1]],mai:[[1,0,0],[0,1,0],[0,0,1]]},"Bradford":{ma:[[0.8951,-0.7502,0.0389],[0.2664,1.7135,-0.0685],[-0.1614,0.0367,1.0296]],mai:[[0.986993,0.432305,-0.008529],[-0.147054,0.51836,0.040043],[0.159963,0.049291,0.968487]]},"Von Kries":{ma:[[0.40024,-0.2263,0],[0.7076,1.16532,0],[-0.08081,0.0457,0.91822]],mai:[[1.859936,0.361191,0],[-1.129382,0.638812,0],[0.219897,-0.000006,1.089064]]}};var _d={"XYZ":{"xyY":function(_e,_f){_f=_4.mixin({whitepoint:"D65",observer:"10",useApproximation:true},_f||{});var wp=_9.whitepoint(_f.whitepoint,_f.observer);var sum=_e.X+_e.Y+_e.Z;if(sum==0){var x=wp.x,y=wp.y;}else{var x=_e.X/sum,y=_e.Y/sum;}return {x:x,y:y,Y:_e.Y};},"Lab":function(xyz,_10){_10=_4.mixin({whitepoint:"D65",observer:"10",useApproximation:true},_10||{});var _11=_9.kappa(_10.useApproximation),_12=_9.epsilon(_10.useApproximation);var wp=_9.whitepoint(_10.whitepoint,_10.observer);var xr=xyz.X/wp.x,yr=xyz.Y/wp.y,zr=xyz.z/wp.z;var fx=(xr>_12)?Math.pow(xr,1/3):(_11*xr+16)/116;var fy=(yr>_12)?Math.pow(yr,1/3):(_11*yr+16)/116;var fz=(zr>_12)?Math.pow(zr,1/3):(_11*zr+16)/116;var L=116*fy-16,a=500*(fx-fy),b=200*(fy-fz);return {L:L,a:a,b:b};},"Luv":function(xyz,_13){_13=_4.mixin({whitepoint:"D65",observer:"10",useApproximation:true},_13||{});var _14=_9.kappa(_13.useApproximation),_15=_9.epsilon(_13.useApproximation);var wp=_9.whitepoint(_13.whitepoint,_13.observer);var ud=(4*xyz.X)/(xyz.X+15*xyz.Y+3*xyz.Z);var vd=(9*xyz.Y)/(xyz.X+15*xyz.Y+3*xyz.Z);var udr=(4*wp.x)/(wp.x+15*wp.y+3*wp.z);var vdr=(9*wp.y)/(wp.x+15*wp.y+3*wp.z);var yr=xyz.Y/wp.y;var L=(yr>_15)?116*Math.pow(yr,1/3)-16:_14*yr;var u=13*L*(ud-udr);var v=13*L*(vd-vdr);return {L:L,u:u,v:v};}},"xyY":{"XYZ":function(xyY){if(xyY.y==0){var X=0,Y=0,Z=0;}else{var X=(xyY.x*xyY.Y)/xyY.y;var Y=xyY.Y;var Z=((1-xyY.x-xyY.y)*xyY.Y)/xyY.y;}return {X:X,Y:Y,Z:Z};}},"Lab":{"XYZ":function(lab,_16){_16=_4.mixin({whitepoint:"D65",observer:"10",useApproximation:true},_16||{});var b=_16.useApproximation,_17=_9.kappa(b),_18=_9.epsilon(b);var wp=_9.whitepoint(_16.whitepoint,_16.observer);var yr=(lab.L>(_17*_18))?Math.pow((lab.L+16)/116,3):lab.L/_17;var fy=(yr>_18)?(lab.L+16)/116:(_17*yr+16)/116;var fx=(lab.a/500)+fy;var fz=fy-(lab.b/200);var _19=Math.pow(fx,3),_1a=Math.pow(fz,3);var xr=(_19>_18)?_19:(116*fx-16)/_17;var zr=(_1a>_18)?_1a:(116*fz-16)/_17;return {X:xr*wp.x,Y:yr*wp.y,Z:zr*wp.z};},"LCHab":function(lab){var L=lab.L,C=Math.pow(lab.a*lab.a+lab.b*lab.b,0.5),H=Math.atan(lab.b,lab.a)*(180/Math.PI);if(H<0){H+=360;}if(H<360){H-=360;}return {L:L,C:C,H:H};}},"LCHab":{"Lab":function(lch){var _1b=lch.H*(Math.PI/180),L=lch.L,a=lch.C/Math.pow(Math.pow(Math.tan(_1b),2)+1,0.5);if(90<lchH&&lch.H<270){a=-a;}var b=Math.pow(Math.pow(lch.C,2)-Math.pow(a,2),0.5);if(lch.H>180){b=-b;}return {L:L,a:a,b:b};}},"Luv":{"XYZ":function(Luv,_1c){_1c=_4.mixin({whitepoint:"D65",observer:"10",useApproximation:true},_1c||{});var b=_1c.useApproximation,_1d=_9.kappa(b),_1e=_9.epsilon(b);var wp=_9.whitepoint(_1c.whitepoint,_1c.observer);var uz=(4*wp.x)/(wp.x+15*wp.y+3*wp.z);var vz=(9*wp.y)/(wp.x+15*wp.y+3*wp.z);var Y=(Luv.L>_1d*_1e)?Math.pow((Luv.L+16)/116,3):Luv.L/_1d;var a=(1/3)*(((52*Luv.L)/(Luv.u+13*Luv.L*uz))-1);var b=-5*Y,c=-(1/3),d=Y*(((39*Luv.L)/(Luv.v+13*Luv.L*vz))-5);var X=(d-b)/(a-c),Z=X*a+b;return {X:X,Y:Y,Z:Z};},"LCHuv":function(Luv){var L=Luv.L,C=Math.pow(Luv.u*Luv.u+Luv.v*Luv*v,0.5),H=Math.atan(Luv.v,Luv.u)*(180/Math.PI);if(H<0){H+=360;}if(H>360){H-=360;}return {L:L,C:C,H:H};}},"LCHuv":{"Luv":function(LCH){var _1f=LCH.H*(Math.PI/180);var L=LCH.L,u=LCH.C/Math.pow(Math.pow(Math.tan(_1f),2)+1,0.5);var v=Math.pow(LCH.C*LCH.C-u*u,0.5);if(90<LCH.H&&LCH.H>270){u*=-1;}if(LCH.H>180){v*=-1;}return {L:L,u:u,v:v};}}};var _20={"CMY":{"CMYK":function(obj,_21){return _7.fromCmy(obj).toCmyk();},"HSL":function(obj,_22){return _7.fromCmy(obj).toHsl();},"HSV":function(obj,_23){return _7.fromCmy(obj).toHsv();},"Lab":function(obj,_24){return _d["XYZ"]["Lab"](_7.fromCmy(obj).toXYZ(_24));},"LCHab":function(obj,_25){return _d["Lab"]["LCHab"](_20["CMY"]["Lab"](obj));},"LCHuv":function(obj,_26){return _d["LCHuv"]["Luv"](_d["Luv"]["XYZ"](_7.fromCmy(obj).toXYZ(_26)));},"Luv":function(obj,_27){return _d["Luv"]["XYZ"](_7.fromCmy(obj).toXYZ(_27));},"RGB":function(obj,_28){return _7.fromCmy(obj);},"XYZ":function(obj,_29){return _7.fromCmy(obj).toXYZ(_29);},"xyY":function(obj,_2a){return _d["XYZ"]["xyY"](_7.fromCmy(obj).toXYZ(_2a));}},"CMYK":{"CMY":function(obj,_2b){return _7.fromCmyk(obj).toCmy();},"HSL":function(obj,_2c){return _7.fromCmyk(obj).toHsl();},"HSV":function(obj,_2d){return _7.fromCmyk(obj).toHsv();},"Lab":function(obj,_2e){return _d["XYZ"]["Lab"](_7.fromCmyk(obj).toXYZ(_2e));},"LCHab":function(obj,_2f){return _d["Lab"]["LCHab"](_20["CMYK"]["Lab"](obj));},"LCHuv":function(obj,_30){return _d["LCHuv"]["Luv"](_d["Luv"]["XYZ"](_7.fromCmyk(obj).toXYZ(_30)));},"Luv":function(obj,_31){return _d["Luv"]["XYZ"](_7.fromCmyk(obj).toXYZ(_31));},"RGB":function(obj,_32){return _7.fromCmyk(obj);},"XYZ":function(obj,_33){return _7.fromCmyk(obj).toXYZ(_33);},"xyY":function(obj,_34){return _d["XYZ"]["xyY"](_7.fromCmyk(obj).toXYZ(_34));}},"HSL":{"CMY":function(obj,_35){return _7.fromHsl(obj).toCmy();},"CMYK":function(obj,_36){return _7.fromHsl(obj).toCmyk();},"HSV":function(obj,_37){return _7.fromHsl(obj).toHsv();},"Lab":function(obj,_38){return _d["XYZ"]["Lab"](_7.fromHsl(obj).toXYZ(_38));},"LCHab":function(obj,_39){return _d["Lab"]["LCHab"](_20["CMYK"]["Lab"](obj));},"LCHuv":function(obj,_3a){return _d["LCHuv"]["Luv"](_d["Luv"]["XYZ"](_7.fromHsl(obj).toXYZ(_3a)));},"Luv":function(obj,_3b){return _d["Luv"]["XYZ"](_7.fromHsl(obj).toXYZ(_3b));},"RGB":function(obj,_3c){return _7.fromHsl(obj);},"XYZ":function(obj,_3d){return _7.fromHsl(obj).toXYZ(_3d);},"xyY":function(obj,_3e){return _d["XYZ"]["xyY"](_7.fromHsl(obj).toXYZ(_3e));}},"HSV":{"CMY":function(obj,_3f){return _7.fromHsv(obj).toCmy();},"CMYK":function(obj,_40){return _7.fromHsv(obj).toCmyk();},"HSL":function(obj,_41){return _7.fromHsv(obj).toHsl();},"Lab":function(obj,_42){return _d["XYZ"]["Lab"](_7.fromHsv(obj).toXYZ(_42));},"LCHab":function(obj,_43){return _d["Lab"]["LCHab"](_20["CMYK"]["Lab"](obj));},"LCHuv":function(obj,_44){return _d["LCHuv"]["Luv"](_d["Luv"]["XYZ"](_7.fromHsv(obj).toXYZ(_44)));},"Luv":function(obj,_45){return _d["Luv"]["XYZ"](_7.fromHsv(obj).toXYZ(_45));},"RGB":function(obj,_46){return _7.fromHsv(obj);},"XYZ":function(obj,_47){return _7.fromHsv(obj).toXYZ(_47);},"xyY":function(obj,_48){return _d["XYZ"]["xyY"](_7.fromHsv(obj).toXYZ(_48));}},"Lab":{"CMY":function(obj,_49){return _7.fromXYZ(_d["Lab"]["XYZ"](obj,_49)).toCmy();},"CMYK":function(obj,_4a){return _7.fromXYZ(_d["Lab"]["XYZ"](obj,_4a)).toCmyk();},"HSL":function(obj,_4b){return _7.fromXYZ(_d["Lab"]["XYZ"](obj,_4b)).toHsl();},"HSV":function(obj,_4c){return _7.fromXYZ(_d["Lab"]["XYZ"](obj,_4c)).toHsv();},"LCHab":function(obj,_4d){return _d["Lab"]["LCHab"](obj,_4d);},"LCHuv":function(obj,_4e){return _d["Luv"]["LCHuv"](_d["Lab"]["XYZ"](obj,_4e),_4e);},"Luv":function(obj,_4f){return _d["XYZ"]["Luv"](_d["Lab"]["XYZ"](obj,_4f),_4f);},"RGB":function(obj,_50){return _7.fromXYZ(_d["Lab"]["XYZ"](obj,_50));},"XYZ":function(obj,_51){return _d["Lab"]["XYZ"](obj,_51);},"xyY":function(obj,_52){return _d["XYZ"]["xyY"](_d["Lab"]["XYZ"](obj,_52),_52);}},"LCHab":{"CMY":function(obj,_53){return _7.fromXYZ(_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_53),_53).toCmy();},"CMYK":function(obj,_54){return _7.fromXYZ(_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_54),_54).toCmyk();},"HSL":function(obj,_55){return _7.fromXYZ(_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_55),_55).toHsl();},"HSV":function(obj,_56){return _7.fromXYZ(_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_56),_56).toHsv();},"Lab":function(obj,_57){return _d["Lab"]["LCHab"](obj,_57);},"LCHuv":function(obj,_58){return _d["Luv"]["LCHuv"](_d["XYZ"]["Luv"](_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_58),_58),_58);},"Luv":function(obj,_59){return _d["XYZ"]["Luv"](_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_59),_59);},"RGB":function(obj,_5a){return _7.fromXYZ(_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_5a),_5a);},"XYZ":function(obj,_5b){return _d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj,_5b),_5b);},"xyY":function(obj,_5c){return _d["XYZ"]["xyY"](_d["Lab"]["XYZ"](_d["LCHab"]["Lab"](obj),_5c),_5c);}},"LCHuv":{"CMY":function(obj,_5d){return _7.fromXYZ(_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_5d),_5d).toCmy();},"CMYK":function(obj,_5e){return _7.fromXYZ(_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_5e),_5e).toCmyk();},"HSL":function(obj,_5f){return _7.fromXYZ(_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_5f),_5f).toHsl();},"HSV":function(obj,_60){return _7.fromXYZ(_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_60),_60).toHsv();},"Lab":function(obj,_61){return _d["XYZ"]["Lab"](_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_61),_61);},"LCHab":function(obj,_62){return _d["Lab"]["LCHab"](_d["XYZ"]["Lab"](_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_62),_62),_62);},"Luv":function(obj,_63){return _d["LCHuv"]["Luv"](obj,_63);},"RGB":function(obj,_64){return _7.fromXYZ(_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_64),_64);},"XYZ":function(obj,_65){return _d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_65);},"xyY":function(obj,_66){return _d["XYZ"]["xyY"](_d["Luv"]["XYZ"](_d["LCHuv"]["Luv"](obj),_66),_66);}},"Luv":{"CMY":function(obj,_67){return _7.fromXYZ(_d["Luv"]["XYZ"](obj,_67),_67).toCmy();},"CMYK":function(obj,_68){return _7.fromXYZ(_d["Luv"]["XYZ"](obj,_68),_68).toCmyk();},"HSL":function(obj,_69){return _7.fromXYZ(_d["Luv"]["XYZ"](obj,_69),_69).toHsl();},"HSV":function(obj,_6a){return _7.fromXYZ(_d["Luv"]["XYZ"](obj,_6a),_6a).toHsv();},"Lab":function(obj,_6b){return _d["XYZ"]["Lab"](_d["Luv"]["XYZ"](obj,_6b),_6b);},"LCHab":function(obj,_6c){return _d["Lab"]["LCHab"](_d["XYZ"]["Lab"](_d["Luv"]["XYZ"](obj,_6c),_6c),_6c);},"LCHuv":function(obj,_6d){return _d["Luv"]["LCHuv"](obj,_6d);},"RGB":function(obj,_6e){return _7.fromXYZ(_d["Luv"]["XYZ"](obj,_6e),_6e);},"XYZ":function(obj,_6f){return _d["Luv"]["XYZ"](obj,_6f);},"xyY":function(obj,_70){return _d["XYZ"]["xyY"](_d["Luv"]["XYZ"](obj,_70),_70);}},"RGB":{"CMY":function(obj,_71){return obj.toCmy();},"CMYK":function(obj,_72){return obj.toCmyk();},"HSL":function(obj,_73){return obj.toHsl();},"HSV":function(obj,_74){return obj.toHsv();},"Lab":function(obj,_75){return _d["XYZ"]["Lab"](obj.toXYZ(_75),_75);},"LCHab":function(obj,_76){return _d["LCHab"]["Lab"](_d["XYZ"]["Lab"](obj.toXYZ(_76),_76),_76);},"LCHuv":function(obj,_77){return _d["LCHuv"]["Luv"](_d["XYZ"]["Luv"](obj.toXYZ(_77),_77),_77);},"Luv":function(obj,_78){return _d["XYZ"]["Luv"](obj.toXYZ(_78),_78);},"XYZ":function(obj,_79){return obj.toXYZ(_79);},"xyY":function(obj,_7a){return _d["XYZ"]["xyY"](obj.toXYZ(_7a),_7a);}},"XYZ":{"CMY":function(obj,_7b){return _7.fromXYZ(obj,_7b).toCmy();},"CMYK":function(obj,_7c){return _7.fromXYZ(obj,_7c).toCmyk();},"HSL":function(obj,_7d){return _7.fromXYZ(obj,_7d).toHsl();},"HSV":function(obj,_7e){return _7.fromXYZ(obj,_7e).toHsv();},"Lab":function(obj,_7f){return _d["XYZ"]["Lab"](obj,_7f);},"LCHab":function(obj,_80){return _d["Lab"]["LCHab"](_d["XYZ"]["Lab"](obj,_80),_80);},"LCHuv":function(obj,_81){return _d["Luv"]["LCHuv"](_d["XYZ"]["Luv"](obj,_81),_81);},"Luv":function(obj,_82){return _d["XYZ"]["Luv"](obj,_82);},"RGB":function(obj,_83){return _7.fromXYZ(obj,_83);},"xyY":function(obj,_84){return _d["XYZ"]["xyY"](_7.fromXYZ(obj,_84),_84);}},"xyY":{"CMY":function(obj,_85){return _7.fromXYZ(_d["xyY"]["XYZ"](obj,_85),_85).toCmy();},"CMYK":function(obj,_86){return _7.fromXYZ(_d["xyY"]["XYZ"](obj,_86),_86).toCmyk();},"HSL":function(obj,_87){return _7.fromXYZ(_d["xyY"]["XYZ"](obj,_87),_87).toHsl();},"HSV":function(obj,_88){return _7.fromXYZ(_d["xyY"]["XYZ"](obj,_88),_88).toHsv();},"Lab":function(obj,_89){return _d["Lab"]["XYZ"](_d["xyY"]["XYZ"](obj,_89),_89);},"LCHab":function(obj,_8a){return _d["LCHab"]["Lab"](_d["Lab"]["XYZ"](_d["xyY"]["XYZ"](obj,_8a),_8a),_8a);},"LCHuv":function(obj,_8b){return _d["LCHuv"]["Luv"](_d["Luv"]["XYZ"](_d["xyY"]["XYZ"](obj,_8b),_8b),_8b);},"Luv":function(obj,_8c){return _d["Luv"]["XYZ"](_d["xyY"]["XYZ"](obj,_8c),_8c);},"RGB":function(obj,_8d){return _7.fromXYZ(_d["xyY"]["XYZ"](obj,_8d),_8d);},"XYZ":function(obj,_8e){return _d["xyY"]["XYZ"](obj,_8e);}}};this.whitepoint=function(_8f,_90){_90=_90||"10";var x=0,y=0,t=0;if(_a[_90]&&_a[_90][_8f]){x=_a[_90][_8f].x;y=_a[_90][_8f].y;t=_a[_90][_8f].t;}else{console.warn("dojox.color.Colorspace::whitepoint: either the observer or the whitepoint name was not found. ",_90,_8f);}var wp={x:x,y:y,z:(1-x-y),t:t,Y:1};return this.convert(wp,"xyY","XYZ");};this.tempToWhitepoint=function(t){if(t<4000){console.warn("dojox.color.Colorspace::tempToWhitepoint: can't find a white point for temperatures less than 4000K. (Passed ",t,").");return {x:0,y:0};}if(t>25000){console.warn("dojox.color.Colorspace::tempToWhitepoint: can't find a white point for temperatures greater than 25000K. (Passed ",t,").");return {x:0,y:0};}var t1=t,t2=t*t,t3=t2*t;var _91=Math.pow(10,9),_92=Math.pow(10,6),_93=Math.pow(10,3);if(t<=7000){var x=(-4.607*_91/t3)+(2.9678*_92/t2)+(0.09911*_93/t)+0.2444063;}else{var x=(-2.0064*_91/t3)+(1.9018*_92/t2)+(0.24748*_93/t)+0.23704;}var y=-3*x*x+2.87*x-0.275;return {x:x,y:y};};this.primaries=function(_94){_94=_4.mixin({profile:"sRGB",whitepoint:"D65",observer:"10",adaptor:"Bradford"},_94||{});var m=[];if(_b[_94.profile]){m=_b[_94.profile].slice(0);}else{console.warn("dojox.color.Colorspace::primaries: the passed profile was not found.  ","Available profiles include: ",_b,".  The profile passed was ",_94.profile);}var _95={name:_94.profile,gamma:m[0],whitepoint:m[1],xr:m[2],yr:m[3],Yr:m[4],xg:m[5],yg:m[6],Yg:m[7],xb:m[8],yb:m[9],Yb:m[10]};if(_94.whitepoint!=_95.whitepoint){var r=this.convert(this.adapt({color:this.convert({x:xr,y:yr,Y:Yr},"xyY","XYZ"),adaptor:_94.adaptor,source:_95.whitepoint,destination:_94.whitepoint}),"XYZ","xyY");var g=this.convert(this.adapt({color:this.convert({x:xg,y:yg,Y:Yg},"xyY","XYZ"),adaptor:_94.adaptor,source:_95.whitepoint,destination:_94.whitepoint}),"XYZ","xyY");var b=this.convert(this.adapt({color:this.convert({x:xb,y:yb,Y:Yb},"xyY","XYZ"),adaptor:_94.adaptor,source:_95.whitepoint,destination:_94.whitepoint}),"XYZ","xyY");_95=_4.mixin(_95,{xr:r.x,yr:r.y,Yr:r.Y,xg:g.x,yg:g.y,Yg:g.Y,xb:b.x,yb:b.y,Yb:b.Y,whitepoint:_94.whitepoint});}return _4.mixin(_95,{zr:1-_95.xr-_95.yr,zg:1-_95.xg-_95.yg,zb:1-_95.xb-_95.yb});};this.adapt=function(_96){if(!_96.color||!_96.source){console.error("dojox.color.Colorspace::adapt: color and source arguments are required. ",_96);}_96=_4.mixin({adaptor:"Bradford",destination:"D65"},_96);var swp=this.whitepoint(_96.source);var dwp=this.whitepoint(_96.destination);if(_c[_96.adaptor]){var ma=_c[_96.adaptor].ma;var mai=_c[_96.adaptor].mai;}else{console.warn("dojox.color.Colorspace::adapt: the passed adaptor '",_96.adaptor,"' was not found.");}var _97=_8.multiply([[swp.x,swp.y,swp.z]],ma);var _98=_8.multiply([[dwp.x,dwp.y,dwp.z]],ma);var _99=[[_98[0][0]/_97[0][0],0,0],[0,_98[0][1]/_97[0][1],0],[0,0,_98[0][2]/_97[0][2]]];var m=_8.multiply(_8.multiply(ma,_99),mai);var r=_8.multiply([[_96.color.X,_96.color.Y,_96.color.Z]],m)[0];return {X:r[0],Y:r[1],Z:r[2]};};this.matrix=function(to,_9a){var wp=this.whitepoint(_9a.whitepoint);var Xr=p.xr/p.yr,Yr=1,Zr=(1-p.xr-p.yr)/p.yr;var Xg=p.xg/p.yg,Yg=1,Zg=(1-p.xg-p.yg)/p.yg;var Xb=p.xb/p.yb,Yb=1,Zr=(1-p.xb-p.yb)/p.yb;var m1=[[Xr,Yr,Zr],[Xg,Yg,Zg],[Xb,Yb,Zb]];var m2=[[wp.X,wp.Y,wp.Z]];var sm=_6.math.matrix.multiply(m2,_6.math.matrix.inverse(m1));var Sr=sm[0][0],Sg=sm[0][1],Sb=sm[0][2];var _9b=[[Sr*Xr,Sr*Yr,Sr*Zr],[Sg*Xg,Sg*Yg,Sg*Zg],[Sb*Xb,Sb*Yb,Sb*Zb]];if(to=="RGB"){return _6.math.inverse(_9b);}return _9b;};this.epsilon=function(_9c){return (_9c||typeof (_9c)=="undefined")?0.008856:216/24289;};this.kappa=function(_9d){return (_9d||typeof (_9d)=="undefined")?903.3:24389/27;};this.convert=function(_9e,_9f,to,_a0){if(_20[_9f]&&_20[_9f][to]){return _20[_9f][to](obj,_a0);}console.warn("dojox.color.Colorspace::convert: Can't convert ",_9e," from ",_9f," to ",to,".");};})();_4.mixin(_6.color,{fromXYZ:function(xyz,_a1){_a1=_a1||{};var p=_6.color.Colorspace.primaries(_a1);var m=_6.color.Colorspace.matrix("RGB",p);var rgb=_6.math.matrix.mutliply([[xyz.X,xyz.Y,xyz.Z]],m);var r=rgb[0][0],g=rgb[0][1],b=rgb[0][2];if(p.profile=="sRGB"){var R=(r>0.0031308)?(1.055*Math.pow(r,1/2.4))-0.055:12.92*r;var G=(g>0.0031308)?(1.055*Math.pow(g,1/2.4))-0.055:12.92*g;var B=(b>0.0031308)?(1.055*Math.pow(b,1/2.4))-0.055:12.92*b;}else{var R=Math.pow(r,1/p.gamma),G=Math.pow(g,1/p.gamma),B=Math.pow(b,1/p.gamma);}return new _6.color.Color({r:Math.floor(R*255),g:Math.floor(G*255),b:Math.floor(B*255)});}});_4.extend(_6.color.Color,{toXYZ:function(_a2){_a2=_a2||{};var p=_6.color.Colorspace.primaries(_a2);var m=_6.color.Colorspace.matrix("XYZ",p);var _a3=this.r/255,_a4=this.g/255,_a5=this.b/255;if(p.profile=="sRGB"){var r=(_a3>0.04045)?Math.pow(((_a3+0.055)/1.055),2.4):_a3/12.92;var g=(_a4>0.04045)?Math.pow(((_a4+0.055)/1.055),2.4):_a4/12.92;var b=(_a5>0.04045)?Math.pow(((_a5+0.055)/1.055),2.4):_a5/12.92;}else{var r=Math.pow(_a3,p.gamma),g=Math.pow(_a4,p.gamma),b=Math.pow(_a5,p.gamma);}var xyz=_6.math.matrix([[r,g,b]],m);return {X:xyz[0][0],Y:xyz[0][1],Z:xyz[0][2]};}});}}};});