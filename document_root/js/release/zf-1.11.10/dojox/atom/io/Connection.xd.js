/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.atom.io.Connection"],["require","dojox.atom.io.model"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.atom.io.Connection"]){_4._hasResource["dojox.atom.io.Connection"]=true;_4.provide("dojox.atom.io.Connection");_4.require("dojox.atom.io.model");_4.declare("dojox.atom.io.Connection",null,{constructor:function(_7,_8){this.sync=_7;this.preventCache=_8;},preventCache:false,alertsEnabled:false,getFeed:function(_9,_a,_b,_c){this._getXmlDoc(_9,"feed",new _6.atom.io.model.Feed(),_6.atom.io.model._Constants.ATOM_NS,_a,_b,_c);},getService:function(_d,_e,_f,_10){this._getXmlDoc(_d,"service",new _6.atom.io.model.Service(_d),_6.atom.io.model._Constants.APP_NS,_e,_f,_10);},getEntry:function(url,_11,_12,_13){this._getXmlDoc(url,"entry",new _6.atom.io.model.Entry(),_6.atom.io.model._Constants.ATOM_NS,_11,_12,_13);},_getXmlDoc:function(url,_14,_15,_16,_17,_18,_19){if(!_19){_19=_4.global;}var ae=this.alertsEnabled;var _1a={url:url,handleAs:"xml",sync:this.sync,preventCache:this.preventCache,load:function(_1b,_1c){var _1d=null;var _1e=_1b;var _1f;if(_1e){if(typeof (_1e.getElementsByTagNameNS)!="undefined"){_1f=_1e.getElementsByTagNameNS(_16,_14);if(_1f&&_1f.length>0){_1d=_1f.item(0);}else{if(_1e.lastChild){_1d=_1e.lastChild;}}}else{if(typeof (_1e.getElementsByTagName)!="undefined"){_1f=_1e.getElementsByTagName(_14);if(_1f&&_1f.length>0){for(var i=0;i<_1f.length;i++){if(_1f[i].namespaceURI==_16){_1d=_1f[i];break;}}}else{if(_1e.lastChild){_1d=_1e.lastChild;}}}else{if(_1e.lastChild){_1d=_1e.lastChild;}else{_17.call(_19,null,null,_1c);return;}}}_15.buildFromDom(_1d);if(_17){_17.call(_19,_15,_1e,_1c);}else{if(ae){throw new Error("The callback value does not exist.");}}}else{_17.call(_19,null,null,_1c);}}};if(this.user&&this.user!==null){_1a.user=this.user;}if(this.password&&this.password!==null){_1a.password=this.password;}if(_18){_1a.error=function(_20,_21){_18.call(_19,_20,_21);};}else{_1a.error=function(){throw new Error("The URL requested cannot be accessed");};}_4.xhrGet(_1a);},updateEntry:function(_22,_23,_24,_25,_26,_27){if(!_27){_27=_4.global;}_22.updated=new Date();var url=_22.getEditHref();if(!url){throw new Error("A URL has not been specified for editing this entry.");}var _28=this;var ae=this.alertsEnabled;var _29={url:url,handleAs:"text",contentType:"text/xml",sync:this.sync,preventCache:this.preventCache,load:function(_2a,_2b){var _2c=null;if(_25){_2c=_2b.xhr.getResponseHeader("Location");if(!_2c){_2c=url;}var _2d=function(_2e,dom,_2f){if(_23){_23.call(_27,_2e,_2c,_2f);}else{if(ae){throw new Error("The callback value does not exist.");}}};_28.getEntry(_2c,_2d);}else{if(_23){_23.call(_27,_22,_2b.xhr.getResponseHeader("Location"),_2b);}else{if(ae){throw new Error("The callback value does not exist.");}}}return _2a;}};if(this.user&&this.user!==null){_29.user=this.user;}if(this.password&&this.password!==null){_29.password=this.password;}if(_24){_29.error=function(_30,_31){_24.call(_27,_30,_31);};}else{_29.error=function(){throw new Error("The URL requested cannot be accessed");};}if(_26){_29.postData=_22.toString(true);_29.headers={"X-Method-Override":"PUT"};_4.rawXhrPost(_29);}else{_29.putData=_22.toString(true);var xhr=_4.rawXhrPut(_29);}},addEntry:function(_32,url,_33,_34,_35,_36){if(!_36){_36=_4.global;}_32.published=new Date();_32.updated=new Date();var _37=_32.feedUrl;var ae=this.alertsEnabled;if(!url&&_37){url=_37;}if(!url){if(ae){throw new Error("The request cannot be processed because the URL parameter is missing.");}return;}var _38=this;var _39={url:url,handleAs:"text",contentType:"text/xml",sync:this.sync,preventCache:this.preventCache,postData:_32.toString(true),load:function(_3a,_3b){var _3c=_3b.xhr.getResponseHeader("Location");if(!_3c){_3c=url;}if(!_3b.retrieveEntry){if(_33){_33.call(_36,_32,_3c,_3b);}else{if(ae){throw new Error("The callback value does not exist.");}}}else{var _3d=function(_3e,dom,_3f){if(_33){_33.call(_36,_3e,_3c,_3f);}else{if(ae){throw new Error("The callback value does not exist.");}}};_38.getEntry(_3c,_3d);}return _3a;}};if(this.user&&this.user!==null){_39.user=this.user;}if(this.password&&this.password!==null){_39.password=this.password;}if(_34){_39.error=function(_40,_41){_34.call(_36,_40,_41);};}else{_39.error=function(){throw new Error("The URL requested cannot be accessed");};}_4.rawXhrPost(_39);},deleteEntry:function(_42,_43,_44,_45,_46){if(!_46){_46=_4.global;}var url=null;if(typeof (_42)=="string"){url=_42;}else{url=_42.getEditHref();}if(!url){_43.call(_46,false,null);throw new Error("The request cannot be processed because the URL parameter is missing.");}var _47={url:url,handleAs:"text",sync:this.sync,preventCache:this.preventCache,load:function(_48,_49){_43.call(_46,_49);return _48;}};if(this.user&&this.user!==null){_47.user=this.user;}if(this.password&&this.password!==null){_47.password=this.password;}if(_44){_47.error=function(_4a,_4b){_44.call(_46,_4a,_4b);};}else{_47.error=function(){throw new Error("The URL requested cannot be accessed");};}if(_45){_47.headers={"X-Method-Override":"DELETE"};_4.xhrPost(_47);}else{_4.xhrDelete(_47);}}});}}};});