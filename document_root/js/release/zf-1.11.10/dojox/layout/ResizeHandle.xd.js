/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.layout.ResizeHandle"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dojo.fx"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.layout.ResizeHandle"]){_4._hasResource["dojox.layout.ResizeHandle"]=true;_4.provide("dojox.layout.ResizeHandle");_4.experimental("dojox.layout.ResizeHandle");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dojo.fx");_4.declare("dojox.layout.ResizeHandle",[_5._Widget,_5._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=_5.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new _6.layout._ResizeHelper({id:"dojoxGlobalResizeHelper"}).placeAt(_4.body());_4.addClass(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _7=_4.partial(_4.addClass,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_7("dojoxResizeNW");break;case "x":this._resizeX=true;_7("dojoxResizeW");break;case "y":this._resizeY=true;_7("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return false;}_4.publish(this.startTopic,[this]);this.targetWidget=_5.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:_4.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return false;}if(!this.activeResize){var c=_4.coords(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var mb=this.targetWidget?_4.marginBox(this.targetDomNode):_4.contentBox(this.targetDomNode);this.startSize={w:mb.w,h:mb.h};if(this.fixedAspect){var _8,_9;if(mb.w>mb.h){_8="w";_9=mb.w/mb.h;}else{_8="h";_9=mb.h/mb.w;}this._aspect={prop:_8};this._aspect[_8]=_9;}this._pconnects=[];this._pconnects.push(_4.connect(_4.doc,"onmousemove",this,"_updateSizing"));this._pconnects.push(_4.connect(_4.doc,"onmouseup",this,"_endSizing"));_4.stopEvent(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var _a=this._getNewCoords(e);if(_a===false){return;}this._resizeHelper.resize(_a);}e.preventDefault();},_getNewCoords:function(e){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=this.startPoint.x-e.clientX,dy=this.startPoint.y-e.clientY,_b=this.startSize.w-(this._resizeX?dx:0),_c=this.startSize.h-(this._resizeY?dy:0);return this._checkConstraints(_b,_c);},_checkConstraints:function(_d,_e){if(this.minSize){var tm=this.minSize;if(_d<tm.w){_d=tm.w;}if(_e<tm.h){_e=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(_d>ms.w){_d=ms.w;}if(_e>ms.h){_e=ms.h;}}if(this.fixedAspect){var ta=this._aspect[this._aspect.prop];if(_d<_e){_e=_d*ta;}else{if(_e<_d){_d=_e*ta;}}}return {w:_d,h:_e};},_changeSizing:function(e){var _f=this._getNewCoords(e);if(_f===false){return;}if(this.targetWidget&&_4.isFunction(this.targetWidget.resize)){this.targetWidget.resize(_f);}else{if(this.animateSizing){var _10=_4.fx[this.animateMethod]([_4.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:_f.w}},duration:this.animateDuration}),_4.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:_f.h}},duration:this.animateDuration})]);_10.play();}else{_4.style(this.targetDomNode,{width:_f.w+"px",height:_f.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){_4.forEach(this._pconnects,_4.disconnect);var pub=_4.partial(_4.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});_4.declare("dojox.layout._ResizeHelper",_5._Widget,{show:function(){_4.fadeIn({node:this.domNode,duration:120,beforeBegin:function(n){_4.style(n,"display","");}}).play();},hide:function(){_4.fadeOut({node:this.domNode,duration:250,onEnd:function(n){_4.style(n,"display","none");}}).play();},resize:function(dim){_4.marginBox(this.domNode,dim);}});}}};});