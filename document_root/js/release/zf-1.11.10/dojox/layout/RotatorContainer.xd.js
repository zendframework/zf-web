/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.layout.RotatorContainer"],["require","dojo.fx"],["require","dijit.layout.StackContainer"],["require","dijit.layout.StackController"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit._Contained"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.layout.RotatorContainer"]){_4._hasResource["dojox.layout.RotatorContainer"]=true;_4.provide("dojox.layout.RotatorContainer");_4.require("dojo.fx");_4.require("dijit.layout.StackContainer");_4.require("dijit.layout.StackController");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dijit._Contained");_4.declare("dojox.layout.RotatorContainer",[_5.layout.StackContainer,_5._Templated],{templateString:"<div class=\"dojoxRotatorContainer\"><div dojoAttachPoint=\"tabNode\"></div><div class=\"dojoxRotatorPager\" dojoAttachPoint=\"pagerNode\"></div><div class=\"dojoxRotatorContent\" dojoAttachPoint=\"containerNode\"></div></div>",showTabs:true,transitionDelay:5000,transition:"fade",transitionDuration:1000,autoStart:true,suspendOnHover:false,pauseOnManualChange:null,reverse:false,pagerId:"",cycles:-1,pagerClass:"dojox.layout.RotatorPager",postCreate:function(){this.inherited(arguments);_4.style(this.domNode,"position","relative");if(this.cycles-0==this.cycles&&this.cycles!=-1){this.cycles++;}else{this.cycles=-1;}if(this.pauseOnManualChange===null){this.pauseOnManualChange=!this.suspendOnHover;}var id=this.id||"rotator"+(new Date()).getTime(),sc=new _5.layout.StackController({containerId:id},this.tabNode);this.tabNode=sc.domNode;this._stackController=sc;_4.style(this.tabNode,"display",this.showTabs?"":"none");this.connect(sc,"onButtonClick","_manualChange");this._subscriptions=[_4.subscribe(this.id+"-cycle",this,"_cycle"),_4.subscribe(this.id+"-state",this,"_state")];var d=Math.round(this.transitionDelay*0.75);if(d<this.transitionDuration){this.transitionDuration=d;}if(this.suspendOnHover){this.connect(this.domNode,"onmouseover","_onMouseOver");this.connect(this.domNode,"onmouseout","_onMouseOut");}},startup:function(){if(this._started){return;}var c=this.getChildren();for(var i=0,_7=c.length;i<_7;i++){if(c[i].declaredClass==this.pagerClass){this.pagerNode.appendChild(c[i].domNode);break;}}this.inherited(arguments);if(this.autoStart){setTimeout(_4.hitch(this,"_play"),10);}else{this._updatePager();}},destroy:function(){_4.forEach(this._subscriptions,_4.unsubscribe);this.inherited(arguments);},_setShowTabsAttr:function(_8){this.showTabs=_8;_4.style(this.tabNode,"display",_8?"":"none");},_updatePager:function(){var c=this.getChildren();_4.publish(this.id+"-update",[this._playing,_4.indexOf(c,this.selectedChildWidget)+1,c.length]);},_onMouseOver:function(){this._resetTimer();this._over=true;},_onMouseOut:function(){this._over=false;if(this._playing){clearTimeout(this._timer);this._timer=setTimeout(_4.hitch(this,"_play",true),200);}},_resetTimer:function(){clearTimeout(this._timer);this._timer=null;},_cycle:function(_9){if(_9 instanceof Boolean||typeof _9=="boolean"){this._manualChange();}var c=this.getChildren(),_a=c.length,i=_4.indexOf(c,this.selectedChildWidget)+(_9===false||(_9!==true&&this.reverse)?-1:1);this.selectChild(c[(i<_a?(i<0?_a-1:i):0)]);this._updatePager();},_manualChange:function(){if(this.pauseOnManualChange){this._playing=false;}this.cycles=-1;},_play:function(_b){this._playing=true;this._resetTimer();if(_b!==true&&this.cycles>0){this.cycles--;}if(this.cycles==0){this._pause();}else{if((!this.suspendOnHover||!this._over)&&this.transitionDelay){this._timer=setTimeout(_4.hitch(this,"_cycle"),this.selectedChildWidget.domNode.getAttribute("transitionDelay")||this.transitionDelay);}}this._updatePager();},_pause:function(){this._playing=false;this._resetTimer();},_state:function(_c){if(_c){this.cycles=-1;this._play();}else{this._pause();}},_transition:function(_d,_e){this._resetTimer();if(_e&&this.transitionDuration){switch(this.transition){case "fade":this._fade(_d,_e);return;}}this._transitionEnd();this.inherited(arguments);},_transitionEnd:function(){if(this._playing){this._play();}else{this._updatePager();}},_fade:function(_f,_10){this._styleNode(_10.domNode,1,1);this._styleNode(_f.domNode,0,2);this._showChild(_f);if(this.doLayout&&_f.resize){_f.resize(this._containerContentBox||this._contentBox);}var _11={duration:this.transitionDuration},_12=_4.fx.combine([_4["fadeOut"](_4.mixin({node:_10.domNode},_11)),_4["fadeIn"](_4.mixin({node:_f.domNode},_11))]);this.connect(_12,"onEnd",_4.hitch(this,function(){this._hideChild(_10);this._transitionEnd();}));_12.play();},_styleNode:function(_13,_14,_15){_4.style(_13,"opacity",_14);_4.style(_13,"zIndex",_15);_4.style(_13,"position","absolute");}});_4.declare("dojox.layout.RotatorPager",[_5._Widget,_5._Templated,_5._Contained],{widgetsInTemplate:true,rotatorId:"",postMixInProperties:function(){this.templateString="<div>"+this.srcNodeRef.innerHTML+"</div>";},postCreate:function(){var p=_5.byId(this.rotatorId)||this.getParent();if(p&&p.declaredClass=="dojox.layout.RotatorContainer"){if(this.previous){_4.connect(this.previous,"onClick",function(){_4.publish(p.id+"-cycle",[false]);});}if(this.next){_4.connect(this.next,"onClick",function(){_4.publish(p.id+"-cycle",[true]);});}if(this.playPause){_4.connect(this.playPause,"onClick",function(){this.attr("label",this.checked?"Pause":"Play");_4.publish(p.id+"-state",[this.checked]);});}this._subscriptions=[_4.subscribe(p.id+"-state",this,"_state"),_4.subscribe(p.id+"-update",this,"_update")];}},destroy:function(){_4.forEach(this._subscriptions,_4.unsubscribe);this.inherited(arguments);},_state:function(_16){if(this.playPause&&this.playPause.checked!=_16){this.playPause.attr("label",_16?"Pause":"Play");this.playPause.attr("checked",_16);}},_update:function(_17,_18,_19){this._state(_17);if(this.current&&_18){this.current.innerHTML=_18;}if(this.total&&_19){this.total.innerHTML=_19;}}});}}};});