/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.layout.FloatingPane"],["require","dojox.layout.ContentPane"],["require","dijit._Templated"],["require","dijit._Widget"],["require","dojo.dnd.Moveable"],["require","dojox.layout.ResizeHandle"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.layout.FloatingPane"]){_4._hasResource["dojox.layout.FloatingPane"]=true;_4.provide("dojox.layout.FloatingPane");_4.experimental("dojox.layout.FloatingPane");_4.require("dojox.layout.ContentPane");_4.require("dijit._Templated");_4.require("dijit._Widget");_4.require("dojo.dnd.Moveable");_4.require("dojox.layout.ResizeHandle");_4.declare("dojox.layout.FloatingPane",[_6.layout.ContentPane,_5._Templated],{closable:true,dockable:true,resizable:false,maxable:false,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:_4.cache("dojox.layout","resources/FloatingPane.html","<div class=\"dojoxFloatingPane\" id=\"${id}\">\n\t<div tabindex=\"0\" waiRole=\"button\" class=\"dojoxFloatingPaneTitle\" dojoAttachPoint=\"focusNode\">\n\t\t<span dojoAttachPoint=\"closeNode\" dojoAttachEvent=\"onclick: close\" class=\"dojoxFloatingCloseIcon\"></span>\n\t\t<span dojoAttachPoint=\"maxNode\" dojoAttachEvent=\"onclick: maximize\" class=\"dojoxFloatingMaximizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"restoreNode\" dojoAttachEvent=\"onclick: _restore\" class=\"dojoxFloatingRestoreIcon\">&thinsp;</span>\t\n\t\t<span dojoAttachPoint=\"dockNode\" dojoAttachEvent=\"onclick: minimize\" class=\"dojoxFloatingMinimizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"titleNode\" class=\"dijitInline dijitTitleNode\"></span>\n\t</div>\n\t<div dojoAttachPoint=\"canvas\" class=\"dojoxFloatingPaneCanvas\">\n\t\t<div dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\" class=\"${contentClass}\">\n\t\t</div>\n\t\t<span dojoAttachPoint=\"resizeHandle\" class=\"dojoxFloatingResizeHandle\"></span>\n\t</div>\n</div>\n"),attributeMap:_4.delegate(_5._Widget.prototype.attributeMap,{title:{type:"innerHTML",node:"titleNode"}}),postCreate:function(){this.inherited(arguments);new _4.dnd.Moveable(this.domNode,{handle:this.focusNode});if(!this.dockable){this.dockNode.style.display="none";}if(!this.closable){this.closeNode.style.display="none";}if(!this.maxable){this.maxNode.style.display="none";this.restoreNode.style.display="none";}if(!this.resizable){this.resizeHandle.style.display="none";}else{this.domNode.style.width=_4.marginBox(this.domNode).w+"px";}this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new _5.BackgroundIframe(this.domNode);this._naturalState=_4.coords(this.domNode);},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.resizable){if(_4.isIE){this.canvas.style.overflow="auto";}else{this.containerNode.style.overflow="auto";}this._resizeHandle=new _6.layout.ResizeHandle({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle);}if(this.dockable){var _7=this.dockTo;if(this.dockTo){this.dockTo=_5.byId(this.dockTo);}else{this.dockTo=_5.byId("dojoxGlobalFloatingDock");}if(!this.dockTo){var _8,_9;if(_7){_8=_7;_9=_4.byId(_7);}else{_9=_4.create("div",null,_4.body());_4.addClass(_9,"dojoxFloatingDockDefault");_8="dojoxGlobalFloatingDock";}this.dockTo=new _6.layout.Dock({id:_8,autoPosition:"south"},_9);this.dockTo.startup();}if((this.domNode.style.display=="none")||(this.domNode.style.visibility=="hidden")){this.minimize();}}this.connect(this.focusNode,"onmousedown","bringToTop");this.connect(this.domNode,"onmousedown","bringToTop");this.resize(_4.coords(this.domNode));this._started=true;},setTitle:function(_a){_4.deprecated("pane.setTitle","Use pane.attr('title', someTitle)","2.0");this.attr("title",_a);},close:function(){if(!this.closable){return;}_4.unsubscribe(this._listener);this.hide(_4.hitch(this,function(){this.destroyRecursive();}));},hide:function(_b){_4.fadeOut({node:this.domNode,duration:this.duration,onEnd:_4.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(_b){_b();}})}).play();},show:function(_c){var _d=_4.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:_4.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility="visible";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(typeof _c=="function"){_c();}this._isDocked=false;if(this._dockNode){this._dockNode.destroy();this._dockNode=null;}})}).play();this.resize(_4.coords(this.domNode));},minimize:function(){if(!this._isDocked){this.hide(_4.hitch(this,"_dock"));}},maximize:function(){if(this._maximized){return;}this._naturalState=_4.position(this.domNode);if(this._isDocked){this.show();setTimeout(_4.hitch(this,"maximize"),this.duration);}_4.addClass(this.focusNode,"floatingPaneMaximized");this.resize(_5.getViewport());this._maximized=true;},_restore:function(){if(this._maximized){this.resize(this._naturalState);_4.removeClass(this.focusNode,"floatingPaneMaximized");this._maximized=false;}},_dock:function(){if(!this._isDocked&&this.dockable){this._dockNode=this.dockTo.addNode(this);this._isDocked=true;}},resize:function(_e){_e=_e||this._naturalState;this._currentState=_e;var _f=this.domNode.style;if("t" in _e){_f.top=_e.t+"px";}if("l" in _e){_f.left=_e.l+"px";}_f.width=_e.w+"px";_f.height=_e.h+"px";var _10={l:0,t:0,w:_e.w,h:(_e.h-this.focusNode.offsetHeight)};_4.marginBox(this.canvas,_10);this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(_10);}},bringToTop:function(){var _11=_4.filter(this._allFPs,function(i){return i!==this;},this);_11.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex;});_11.push(this);_4.forEach(_11,function(w,x){w.domNode.style.zIndex=this._startZ+(x*2);_4.removeClass(w.domNode,"dojoxFloatingPaneFg");},this);_4.addClass(this.domNode,"dojoxFloatingPaneFg");},destroy:function(){this._allFPs.splice(_4.indexOf(this._allFPs,this),1);if(this._resizeHandle){this._resizeHandle.destroy();}this.inherited(arguments);}});_4.declare("dojox.layout.Dock",[_5._Widget,_5._Templated],{templateString:"<div class=\"dojoxDock\"><ul dojoAttachPoint=\"containerNode\" class=\"dojoxDockList\"></ul></div>",_docked:[],_inPositioning:false,autoPosition:false,addNode:function(_12){var div=_4.create("li",null,this.containerNode),_13=new _6.layout._DockNode({title:_12.title,paneRef:_12},div);_13.startup();return _13;},startup:function(){if(this.id=="dojoxGlobalFloatingDock"||this.isFixedDock){this.connect(window,"onresize","_positionDock");this.connect(window,"onscroll","_positionDock");if(_4.isIE){this.connect(this.domNode,"onresize","_positionDock");}}this._positionDock(null);this.inherited(arguments);},_positionDock:function(e){if(!this._inPositioning){if(this.autoPosition=="south"){setTimeout(_4.hitch(this,function(){this._inPositiononing=true;var _14=_5.getViewport();var s=this.domNode.style;s.left=_14.l+"px";s.width=(_14.w-2)+"px";s.top=(_14.h+_14.t)-this.domNode.offsetHeight+"px";this._inPositioning=false;}),125);}}}});_4.declare("dojox.layout._DockNode",[_5._Widget,_5._Templated],{title:"",paneRef:null,templateString:"<li dojoAttachEvent=\"onclick: restore\" class=\"dojoxDockNode\">"+"<span dojoAttachPoint=\"restoreNode\" class=\"dojoxDockRestoreButton\" dojoAttachEvent=\"onclick: restore\"></span>"+"<span class=\"dojoxDockTitleNode\" dojoAttachPoint=\"titleNode\">${title}</span>"+"</li>",restore:function(){this.paneRef.show();this.paneRef.bringToTop();if(!this.paneRef.isLoaded){this.paneRef.refresh();}this.destroy();}});}}};});