/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.html.ellipsis"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.html.ellipsis"]){_4._hasResource["dojox.html.ellipsis"]=true;_4.provide("dojox.html.ellipsis");(function(d){if(d.isMoz){var _7=1;if("dojoxFFEllipsisDelay" in d.config){_7=Number(d.config.dojoxFFEllipsisDelay);if(isNaN(_7)){_7=1;}}var _8="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";var _9=document.createElementNS(_8,"window");var _a=document.createElementNS(_8,"description");_a.setAttribute("crop","end");_9.appendChild(_a);var _b=function(n){var x=_9.cloneNode(true);x.firstChild.setAttribute("value",n.textContent);n.innerHTML="";n.appendChild(x);};var _c=d.create;var dd=d.doc;var dp=d.place;var _d=_c("iframe",{className:"dojoxEllipsisIFrame",src:"javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'"});var _e=function(r,_f){if(r.collapsed){return;}if(_f>0){do{_e(r);_f--;}while(_f);return;}if(r.endContainer.nodeType==3&&r.endOffset>0){r.setEnd(r.endContainer,r.endOffset-1);}else{if(r.endContainer.nodeType==3){r.setEndBefore(r.endContainer);_e(r);return;}else{if(r.endOffset&&r.endContainer.childNodes.length>=r.endOffset){var _10=r.endContainer.childNodes[r.endOffset-1];if(_10.nodeType==3){r.setEnd(_10,_10.length-1);}else{if(_10.childNodes.length){r.setEnd(_10,_10.childNodes.length);_e(r);return;}else{r.setEndBefore(_10);_e(r);return;}}}else{r.setEndBefore(r.endContainer);_e(r);return;}}}};var _11=function(n){var c=_c("div",{className:"dojoxEllipsisContainer"});var e=_c("div",{className:"dojoxEllipsisShown",style:{display:"none"}});n.parentNode.replaceChild(c,n);c.appendChild(n);c.appendChild(e);var i=_d.cloneNode(true);var ns=n.style;var es=e.style;var _12;var _13=function(){ns.display="";es.display="none";if(n.scrollWidth<=n.offsetWidth){return;}var r=dd.createRange();r.selectNodeContents(n);ns.display="none";es.display="";var _14=false;do{var _15=1;dp(r.cloneContents(),e,"only");var sw=e.scrollWidth,ow=e.offsetWidth;_14=(sw<=ow);var pct=(1-((ow*1)/sw));if(pct>0){_15=Math.max(Math.round(e.textContent.length*pct)-1,1);}_e(r,_15);}while(!r.collapsed&&!_14);};i.onload=function(){i.contentWindow.onresize=_13;_13();};c.appendChild(i);};var hc=d.hasClass;var doc=d.doc;var s,fn,opt;if(doc.querySelectorAll){s=doc;fn="querySelectorAll";opt=".dojoxEllipsis";}else{if(doc.getElementsByClassName){s=doc;fn="getElementsByClassName";opt="dojoxEllipsis";}else{s=d;fn="query";opt=".dojoxEllipsis";}}fx=function(){d.forEach(s[fn].apply(s,[opt]),function(n){if(!n||n._djx_ellipsis_done){return;}n._djx_ellipsis_done=true;if(n.textContent==n.innerHTML&&!hc(n,"dojoxEllipsisSelectable")){_b(n);}else{_11(n);}});};d.addOnLoad(function(){var t=null;var c=null;var _16=function(){if(c){d.disconnect(c);c=null;}if(t){clearTimeout(t);}t=setTimeout(function(){t=null;fx();c=d.connect(d.body(),"DOMSubtreeModified",_16);},_7);};_16();});}})(_4);}}};});