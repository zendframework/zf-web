/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.date.timezone"],["require","dojo.date.locale"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.date.timezone"]){_4._hasResource["dojox.date.timezone"]=true;_4.experimental("dojox.date.timezone");_4.provide("dojox.date.timezone");_4.require("dojo.date.locale");(function(_7){var _8=_7.config;var _9=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"];var _a=1835,_b=2038;var _c={},_d={},_e={},_f={};var _10=_8.timezoneFileBasePath||_7.moduleUrl("dojox.date","zoneinfo");var _11=_8.timezoneLoadingScheme||"preloadAll";var _12=_8.defaultZoneFile||((_11=="preloadAll")?_9:"northamerica");_7._contentHandlers["olson-zoneinfo"]=function(xhr){var str=_7._contentHandlers["text"](xhr);var s="";var _13=str.split("\n");var arr=[];var _14="";var _15=null;var _16=null;var ret={zones:{},rules:{}};for(var i=0;i<_13.length;i++){var l=_13[i];if(l.match(/^\s/)){l="Zone "+_15+l;}l=l.split("#")[0];if(l.length>3){arr=l.split(/\s+/);_14=arr.shift();switch(_14){case "Zone":_15=arr.shift();if(arr[0]){if(!ret.zones[_15]){ret.zones[_15]=[];}ret.zones[_15].push(arr);}break;case "Rule":_16=arr.shift();if(!ret.rules[_16]){ret.rules[_16]=[];}ret.rules[_16].push(arr);break;case "Link":if(ret.zones[arr[1]]){throw new Error("Error with Link "+arr[1]);}ret.zones[arr[1]]=arr[0];break;case "Leap":break;default:break;}}}return ret;};function _17(_18){_18=_18||{};_d=_7.mixin(_d,_18.zones||{});_f=_7.mixin(_f,_18.rules||{});};function _19(e){console.error("Error loading zone file:",e);throw e;};function _1a(_1b){_c[_1b]=true;_7.xhrGet({url:_10+"/"+_1b,sync:true,handleAs:"olson-zoneinfo",load:_17,error:_19});};var _1c={"jan":0,"feb":1,"mar":2,"apr":3,"may":4,"jun":5,"jul":6,"aug":7,"sep":8,"oct":9,"nov":10,"dec":11},_1d={"sun":0,"mon":1,"tue":2,"wed":3,"thu":4,"fri":5,"sat":6},_1e={"EST":"northamerica","MST":"northamerica","HST":"northamerica","EST5EDT":"northamerica","CST6CDT":"northamerica","MST7MDT":"northamerica","PST8PDT":"northamerica","America":"northamerica","Pacific":"australasia","Atlantic":"europe","Africa":"africa","Indian":"africa","Antarctica":"antarctica","Asia":"asia","Australia":"australasia","Europe":"europe","WET":"europe","CET":"europe","MET":"europe","EET":"europe"},_1f={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe","America/Argentina/Buenos_Aires":"southamerica","America/Argentina/Cordoba":"southamerica","America/Argentina/Tucuman":"southamerica","America/Argentina/La_Rioja":"southamerica","America/Argentina/San_Juan":"southamerica","America/Argentina/Jujuy":"southamerica","America/Argentina/Catamarca":"southamerica","America/Argentina/Mendoza":"southamerica","America/Argentina/Rio_Gallegos":"southamerica","America/Argentina/Ushuaia":"southamerica","America/Aruba":"southamerica","America/La_Paz":"southamerica","America/Noronha":"southamerica","America/Belem":"southamerica","America/Fortaleza":"southamerica","America/Recife":"southamerica","America/Araguaina":"southamerica","America/Maceio":"southamerica","America/Bahia":"southamerica","America/Sao_Paulo":"southamerica","America/Campo_Grande":"southamerica","America/Cuiaba":"southamerica","America/Porto_Velho":"southamerica","America/Boa_Vista":"southamerica","America/Manaus":"southamerica","America/Eirunepe":"southamerica","America/Rio_Branco":"southamerica","America/Santiago":"southamerica","Pacific/Easter":"southamerica","America/Bogota":"southamerica","America/Curacao":"southamerica","America/Guayaquil":"southamerica","Pacific/Galapagos":"southamerica","Atlantic/Stanley":"southamerica","America/Cayenne":"southamerica","America/Guyana":"southamerica","America/Asuncion":"southamerica","America/Lima":"southamerica","Atlantic/South_Georgia":"southamerica","America/Paramaribo":"southamerica","America/Port_of_Spain":"southamerica","America/Montevideo":"southamerica","America/Caracas":"southamerica"},_20={"US":"S","Chatham":"S","NZ":"S","NT_YK":"S","Edm":"S","Salv":"S","Canada":"S","StJohns":"S","TC":"S","Guat":"S","Mexico":"S","Haiti":"S","Barb":"S","Belize":"S","CR":"S","Moncton":"S","Swift":"S","Hond":"S","Thule":"S","NZAQ":"S","Zion":"S","ROK":"S","PRC":"S","Taiwan":"S","Ghana":"GMT","SL":"WAT","Chicago":"S","Detroit":"S","Vanc":"S","Denver":"S","Halifax":"S","Cuba":"S","Indianapolis":"S","Starke":"S","Marengo":"S","Pike":"S","Perry":"S","Vincennes":"S","Pulaski":"S","Louisville":"S","CA":"S","Nic":"S","Menominee":"S","Mont":"S","Bahamas":"S","NYC":"S","Regina":"S","Resolute":"ES","DR":"S","Toronto":"S","Winn":"S"};function _21(t){throw new Error("Timezone \""+t+"\" is either incorrect, or not loaded in the timezone registry.");};function _22(tz){var ret=_1f[tz];if(!ret){var reg=tz.split("/")[0];ret=_1e[reg];if(!ret){var _23=_d[tz];if(typeof _23=="string"){return _22(_23);}else{if(!_c.backward){_1a("backward");return _22(tz);}else{_21(tz);}}}}return ret;};function _24(str){var pat=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([su])?$/;var hms=str.match(pat);if(!hms){return null;}hms[1]=parseInt(hms[1],10);hms[2]=hms[2]?parseInt(hms[2],10):0;hms[3]=hms[3]?parseInt(hms[3],10):0;return hms;};function _25(y,m,d,h,mn,s,off){return Date.UTC(y,m,d,h,mn,s)+((off||0)*60*1000);};function _26(m){return _1c[m.substr(0,3).toLowerCase()];};function _27(str){var off=_24(str);if(off===null){return 0;}var adj=str.indexOf("-")===0?-1:1;off=adj*(((off[1]*60+off[2])*60+off[3])*1000);return -off/60/1000;};function _28(_29,_2a,off){var _2b=_26(_29[3]),day=_29[4],_2c=_24(_29[5]);if(_2c[4]=="u"){off=0;}var d,_2d,_2e;if(isNaN(day)){if(day.substr(0,4)=="last"){day=_1d[day.substr(4,3).toLowerCase()];d=new Date(_25(_2a,_2b+1,1,_2c[1]-24,_2c[2],_2c[3],off));_2d=_7.date.add(d,"minute",-off).getUTCDay();_2e=(day>_2d)?(day-_2d-7):(day-_2d);if(_2e!==0){d=_7.date.add(d,"hour",_2e*24);}return d;}else{day=_1d[day.substr(0,3).toLowerCase()];if(day!="undefined"){if(_29[4].substr(3,2)==">="){d=new Date(_25(_2a,_2b,parseInt(_29[4].substr(5),10),_2c[1],_2c[2],_2c[3],off));_2d=_7.date.add(d,"minute",-off).getUTCDay();_2e=(day<_2d)?(day-_2d+7):(day-_2d);if(_2e!==0){d=_7.date.add(d,"hour",_2e*24);}return d;}else{if(day.substr(3,2)=="<="){d=new Date(_25(_2a,_2b,parseInt(_29[4].substr(5),10),_2c[1],_2c[2],_2c[3],off));_2d=_7.date.add(d,"minute",-off).getUTCDay();_2e=(day>_2d)?(day-_2d-7):(day-_2d);if(_2e!==0){d=_7.date.add(d,"hour",_2e*24);}return d;}}}}}else{d=new Date(_25(_2a,_2b,parseInt(day,10),_2c[1],_2c[2],_2c[3],off));return d;}return null;};function _2f(_30,_31){var _32=[];_7.forEach(_f[_30[1]]||[],function(r){for(var i=0;i<2;i++){switch(r[i]){case "min":r[i]=_a;break;case "max":r[i]=_b;break;case "only":break;default:r[i]=parseInt(r[i],10);if(isNaN(r[i])){throw new Error("Invalid year found on rule");}break;}}if(typeof r[6]=="string"){r[6]=_27(r[6]);}if((r[0]<=_31&&r[1]>=_31)||(r[0]==_31&&r[1]=="only")){_32.push({r:r,d:_28(r,_31,_30[0])});}});return _32;};function _33(tz,_34){var zr=_e[tz]=[];for(var i=0;i<_34.length;i++){var z=_34[i];var r=zr[i]=[];var _35=null;var _36=null;var _37=[];if(typeof z[0]=="string"){z[0]=_27(z[0]);}if(i===0){r[0]=Date.UTC(_a,0,1,0,0,0,0);}else{r[0]=zr[i-1][1];_35=_34[i-1];_36=zr[i-1];_37=_36[2];}var _38=new Date(r[0]).getUTCFullYear();var _39=z[3]?parseInt(z[3],10):_b;var rlz=[];var j;for(j=_38;j<=_39;j++){rlz=rlz.concat(_2f(z,j));}rlz.sort(function(a,b){return _7.date.compare(a.d,b.d);});var rl;for(j=0,rl;(rl=rlz[j]);j++){var _3a=j>0?rlz[j-1]:null;if(rl.r[5].indexOf("u")<0&&rl.r[5].indexOf("s")<0){if(j===0&&i>0){if(_37.length){rl.d=_7.date.add(rl.d,"minute",_37[_37.length-1].r[6]);}else{if(_7.date.compare(new Date(_36[1]),rl.d,"date")===0){rl.d=new Date(_36[1]);}else{rl.d=_7.date.add(rl.d,"minute",_27(_35[1]));}}}else{if(j>0){rl.d=_7.date.add(rl.d,"minute",_3a.r[6]);}}}}r[2]=rlz;if(!z[3]){r[1]=Date.UTC(_b,11,31,23,59,59,999);}else{var _3b=parseInt(z[3],10),_3c=_26(z[4]||"Jan"),day=parseInt(z[5]||"1",10),_3d=_24(z[6]||"0");var _3e=r[1]=_25(_3b,_3c,day,_3d[1],_3d[2],_3d[3],((_3d[4]=="u")?0:z[0]));if(isNaN(_3e)){_3e=r[1]=_28([0,0,0,z[4],z[5],z[6]||"0"],_3b,((_3d[4]=="u")?0:z[0])).getTime();}var _3f=_7.filter(rlz,function(rl,idx){var o=idx>0?rlz[idx-1].r[6]*60*1000:0;return (rl.d.getTime()<_3e+o);});if(_3d[4]!="u"&&_3d[4]!="s"){if(_3f.length){r[1]+=_3f[_3f.length-1].r[6]*60*1000;}else{r[1]+=_27(z[1])*60*1000;}}}}};function _40(dt,tz){var t=tz;var _41=_d[t];while(typeof _41=="string"){t=_41;_41=_d[t];}if(!_41){if(!_c.backward){var _42=_1a("backward",true);return _40(dt,tz);}_21(t);}if(!_e[tz]){_33(tz,_41);}var _43=_e[tz];var tm=dt.getTime();for(var i=0,r;(r=_43[i]);i++){if(tm>=r[0]&&tm<r[1]){return {zone:_41[i],range:_43[i],idx:i};}}throw new Error("No Zone found for \""+tz+"\" on "+dt);};function _44(dt,_45){var _46=-1;var _47=_45.range[2]||[];var tsp=dt.getTime();var zr=_45.range;for(var i=0,r;(r=_47[i]);i++){if(tsp>=r.d.getTime()){_46=i;}}if(_46>=0){return _47[_46].r;}return null;};function _48(tz,_49,_4a){var res;var _4b=_49.zone;var _4c=_4b[2];if(_4c.indexOf("%s")>-1){var _4d;if(_4a){_4d=_4a[7];if(_4d=="-"){_4d="";}}else{if(_4b[1] in _20){_4d=_20[_4b[1]];}else{if(_49.idx>0){var pz=_d[tz][_49.idx-1];var pb=pz[2];if(pb.indexOf("%s")<0){if(_4c.replace("%s","S")==pb){_4d="S";}else{_4d="";}}else{_4d="";}}else{_4d="";}}}res=_4c.replace("%s",_4d);}else{if(_4c.indexOf("/")>-1){var bs=_4c.split("/");if(_4a){res=bs[_4a[6]===0?0:1];}else{res=bs[0];}}else{res=_4c;}}return res;};_7.setObject("dojox.date.timezone",{getTzInfo:function(dt,tz){if(_11=="lazyLoad"){var _4e=_22(tz);if(!_4e){throw new Error("Not a valid timezone ID.");}else{if(!_c[_4e]){_1a(_4e);}}}var _4f=_40(dt,tz);var off=_4f.zone[0];var _50=_44(dt,_4f);if(_50){off+=_50[6];}else{if(_f[_4f.zone[1]]&&_4f.idx>0){off+=_27(_d[tz][_4f.idx-1][1]);}else{off+=_27(_4f.zone[1]);}}var _51=_48(tz,_4f,_50);return {tzOffset:off,tzAbbr:_51};},getAllZones:function(){var arr=[];for(var z in _d){arr.push(z);}arr.sort();return arr;}});if(typeof _12=="string"&&_12){_12=[_12];}if(_7.isArray(_12)){_7.forEach(_12,function(f){_1a(f);});}var _52=_7.date.locale.format,_53=_7.date.locale._getZone;_7.date.locale.format=function(_54,_55){_55=_55||{};if(_55.timezone&&!_55._tzInfo){_55._tzInfo=_6.date.timezone.getTzInfo(_54,_55.timezone);}if(_55._tzInfo){var _56=_54.getTimezoneOffset()-_55._tzInfo.tzOffset;_54=new Date(_54.getTime()+(_56*60*1000));}return _52.call(this,_54,_55);};_7.date.locale._getZone=function(_57,_58,_59){if(_59._tzInfo){return _58?_59._tzInfo.tzAbbr:_59._tzInfo.tzOffset;}return _53.call(this,_57,_58,_59);};})(_4);}}};});