/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.form.FilteringSelect"],["require","dijit.form.ComboBox"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.form.FilteringSelect"]){_4._hasResource["dijit.form.FilteringSelect"]=true;_4.provide("dijit.form.FilteringSelect");_4.require("dijit.form.ComboBox");_4.declare("dijit.form.FilteringSelect",[_5.form.MappedTextBox,_5.form.ComboBoxMixin],{_isvalid:true,required:true,_lastDisplayedValue:"",isValid:function(){return this._isvalid||(!this.required&&this.attr("displayedValue")=="");},_callbackSetLabel:function(_7,_8,_9){if((_8&&_8.query[this.searchAttr]!=this._lastQuery)||(!_8&&_7.length&&this.store.getIdentity(_7[0])!=this._lastQuery)){return;}if(!_7.length){this.valueNode.value="";_5.form.TextBox.superclass._setValueAttr.call(this,"",_9||(_9===undefined&&!this._focused));this._isvalid=false;this.validate(this._focused);this.item=null;}else{this.attr("item",_7[0],_9);}},_openResultList:function(_a,_b){if(_b.query[this.searchAttr]!=this._lastQuery){return;}if(this.item===undefined){this._isvalid=_a.length!=0||this._maxOptions!=0;this.validate(true);}_5.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments);},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_c,_d){if(!this._onChangeActive){_d=null;}this._lastQuery=_c;if(_c===null||_c===""){this._setDisplayedValueAttr("",_d);return;}var _e=this;this.store.fetchItemByIdentity({identity:_c,onItem:function(_f){_e._callbackSetLabel(_f?[_f]:[],undefined,_d);}});},_setItemAttr:function(_10,_11,_12){this._isvalid=true;this.inherited(arguments);this.valueNode.value=this.value;this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(_13){return _13.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_14,_15){if(!this._created){_15=false;}if(this.store){this._hideResultList();var _16=_4.clone(this.query);this._lastQuery=_16[this.searchAttr]=this._getDisplayQueryString(_14);this.textbox.value=_14;this._lastDisplayedValue=_14;var _17=this;var _18={query:_16,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(_19,_1a){_17._fetchHandle=null;_4.hitch(_17,"_callbackSetLabel")(_19,_1a,_15);},onError:function(_1b){_17._fetchHandle=null;console.error("dijit.form.FilteringSelect: "+_1b);_4.hitch(_17,"_callbackSetLabel")([],undefined,false);}};_4.mixin(_18,this.fetchProperties);this._fetchHandle=this.store.fetch(_18);}},postMixInProperties:function(){this.inherited(arguments);this._isvalid=!this.required;},undo:function(){this.attr("displayedValue",this._lastDisplayedValue);}});}}};});