/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.widget.Pager"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dojo.fx"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.widget.Pager"]){_4._hasResource["dojox.widget.Pager"]=true;_4.provide("dojox.widget.Pager");_4.experimental("dojox.widget.Pager");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dojo.fx");_4.declare("dojox.widget.Pager",[_5._Widget,_5._Templated],{templateString:_4.cache("dojox.widget","Pager/Pager.html","<div dojoAttachPoint=\"pagerContainer\" tabIndex=\"0\" dojoAttachEvent=\"onkeypress: _handleKey, onfocus: _a11yStyle, onblur:_a11yStyle\" class=\"${orientation}PagerContainer\">\n    <div class=\"pagerContainer\">\n\t\t<div dojoAttachPoint=\"pagerContainerStatus\" class=\"${orientation}PagerStatus\"></div>\n\t\t<div dojoAttachPoint=\"pagerContainerView\" class=\"${orientation}PagerView\">\n\t\t    <div dojoAttachPoint=\"pagerItemContainer\"><ul dojoAttachPoint=\"pagerItems\" class=\"pagerItems\"></ul></div>\n\t\t</div>\n\t\t<div dojoAttachPoint=\"pagerContainerPager\" class=\"${orientation}PagerPager\">\n\t\t\t<div tabIndex=\"0\" dojoAttachPoint=\"pagerNext\" class=\"pagerIconContainer\" dojoAttachEvent=\"onclick: _pagerNext\"><img dojoAttachPoint=\"pagerIconNext\" src=\"${iconNext}\" alt=\"Next\" /></div>\n\t\t\t<div tabIndex=\"0\" dojoAttachPoint=\"pagerPrevious\" class=\"pagerIconContainer\" dojoAttachEvent=\"onclick: _pagerPrevious\"><img dojoAttachPoint=\"pagerIconPrevious\" src=\"${iconPrevious}\" alt=\"Previous\" /></div>\n\t\t</div>\n    </div>\n\t<div dojoAttachPoint=\"containerNode\" style=\"display:none\"></div>\n</div>\n"),iconPage:_4.moduleUrl("dojox.widget","Pager/images/pageInactive.png"),iconPageActive:_4.moduleUrl("dojox.widget","Pager/images/pageActive.png"),store:null,orientation:"horizontal",statusPos:"leading",pagerPos:"center",duration:500,itemSpace:2,resizeChildren:true,itemClass:"dojox.widget._PagerItem",itemsPage:3,postMixInProperties:function(){var h=(this.orientation=="horizontal");_4.mixin(this,{_totalPages:0,_currentPage:1,dirClass:"pager"+(h?"Horizontal":"Vertical"),iconNext:_4.moduleUrl("dojox.widget","Pager/images/"+(h?"h":"v")+"Next.png"),iconPrevious:_4.moduleUrl("dojox.widget","Pager/images/"+(h?"h":"v")+"Previous.png")});},postCreate:function(){this.inherited(arguments);this.store.fetch({onComplete:_4.hitch(this,"_init")});},_a11yStyle:function(e){_4[(e.type=="focus"?"addClass":"removeClass")](e.target,"pagerFocus");},_handleKey:function(e){var dk=_4.keys;var _7=(e.charCode==dk.SPACE?dk.SPACE:e.keyCode);switch(_7){case dk.UP_ARROW:case dk.RIGHT_ARROW:case 110:case 78:e.preventDefault();this._pagerNext();break;case dk.DOWN_ARROW:case dk.LEFT_ARROW:case 112:case 80:e.preventDefault();this._pagerPrevious();break;case dk.ENTER:switch(e.target){case this.pagerNext:this._pagerNext();break;case this.pagerPrevious:this._pagerPrevious();break;}break;}},_init:function(_8){this.items=_8;this._renderPages();this._renderStatus();this._renderPager();},_renderPages:function(){var _9=this.pagerContainerView;var _a=(this.orientation=="horizontal");var _b=_4.style;if(_a){var _c=_4.marginBox(this.pagerContainerPager).h;var _d=_4.marginBox(this.pagerContainerStatus).h;if(this.pagerPos!="center"){var _e=_c+_d;}else{var _e=_d;var _f=this.pagerIconNext.width;var _10=_b(_9,"width");var _11=_10-(2*_f);_b(_9,{width:_11+"px",marginLeft:this.pagerIconNext.width+"px",marginRight:this.pagerIconNext.width+"px"});}var _12=_b(this.pagerContainer,"height")-_e;_b(this.pagerContainerView,"height",_12+"px");var _13=Math.floor(_b(_9,"width")/this.itemsPage);if(this.statusPos=="trailing"){if(this.pagerPos!="center"){_b(_9,"marginTop",_c+"px");}_b(_9,"marginBottom",_d+"px");}else{_b(_9,"marginTop",_d+"px");if(this.pagerPos!="center"){_b(_9,"marginTop",_c+"px");}}}else{var _14=_4.marginBox(this.pagerContainerPager).w;var _15=_4.marginBox(this.pagerContainerStatus).w;var _16=_b(this.pagerContainer,"width");if(this.pagerPos!="center"){var _17=_14+_15;}else{var _17=_15;var _18=this.pagerIconNext.height;var _19=_b(_9,"height");var _1a=_19-(2*_18);_b(_9,{height:_1a+"px",marginTop:this.pagerIconNext.height+"px",marginBottom:this.pagerIconNext.height+"px"});}var _1b=_b(this.pagerContainer,"width")-_17;_b(_9,"width",_1b+"px");var _13=Math.floor(_b(_9,"height")/this.itemsPage);if(this.statusPos=="trailing"){if(this.pagerPos!="center"){_b(_9,"marginLeft",_14+"px");}_b(_9,"marginRight",_15+"px");}else{_b(_9,"marginLeft",_15+"px");if(this.pagerPos!="center"){_b(_9,"marginRight",_14+"px");}}}var _1c=_4.getObject(this.itemClass);var _1d="padding"+(_a?"Left":"Top");var _1e="padding"+(_a?"Right":"Bottom");_4.forEach(this.items,function(_1f,cnt){var _20=_4.create("div",{innerHTML:_1f.content});var _21=new _1c({id:this.id+"-item-"+(cnt+1)},_20);this.pagerItems.appendChild(_21.domNode);var _22={};_22[(_a?"width":"height")]=(_13-this.itemSpace)+"px";var p=(_a?"height":"width");_22[p]=_b(_9,p)+"px";_b(_21.containerNode,_22);if(this.resizeChildren){_21.resizeChildren();}_21.parseChildren();_b(_21.domNode,"position","absolute");if(cnt<this.itemsPage){var pos=(cnt)*_13;var _23=(_a?"left":"top");var dir=(_a?"top":"left");_b(_21.domNode,dir,"0px");_b(_21.domNode,_23,pos+"px");}else{_b(_21.domNode,"top","-1000px");_b(_21.domNode,"left","-1000px");}_b(_21.domNode,_1e,(this.itemSpace/2)+"px");_b(_21.domNode,_1d,(this.itemSpace/2)+"px");},this);},_renderPager:function(){var tcp=this.pagerContainerPager;var _24="0px";var _25=(this.orientation=="horizontal");if(_25){if(this.statusPos=="center"){}else{if(this.statusPos=="trailing"){_4.style(tcp,"top",_24);}else{_4.style(tcp,"bottom",_24);}}_4.style(this.pagerNext,"right",_24);_4.style(this.pagerPrevious,"left",_24);}else{if(this.statusPos=="trailing"){_4.style(tcp,"left",_24);}else{_4.style(tcp,"right",_24);}_4.style(this.pagerNext,"bottom",_24);_4.style(this.pagerPrevious,"top",_24);}},_renderStatus:function(){this._totalPages=Math.ceil(this.items.length/this.itemsPage);this.iconWidth=0;this.iconHeight=0;this.iconsLoaded=0;this._iconConnects=[];for(var i=1;i<=this._totalPages;i++){var _26=new Image();var _27=i;_4.connect(_26,"onclick",_4.hitch(this,function(_28){this._pagerSkip(_28);},_27));this._iconConnects[_27]=_4.connect(_26,"onload",_4.hitch(this,function(_29){this.iconWidth+=_26.width;this.iconHeight+=_26.height;this.iconsLoaded++;if(this._totalPages==this.iconsLoaded){if(this.orientation=="horizontal"){if(this.statusPos=="trailing"){if(this.pagerPos=="center"){var _2a=_4.style(this.pagerContainer,"height");var _2b=_4.style(this.pagerContainerStatus,"height");_4.style(this.pagerContainerPager,"top",((_2a/2)-(_2b/2))+"px");}_4.style(this.pagerContainerStatus,"bottom","0px");}else{if(this.pagerPos=="center"){var _2a=_4.style(this.pagerContainer,"height");var _2b=_4.style(this.pagerContainerStatus,"height");_4.style(this.pagerContainerPager,"bottom",((_2a/2)-(_2b/2))+"px");}_4.style(this.pagerContainerStatus,"top","0px");}var _2c=(_4.style(this.pagerContainer,"width")/2)-(this.iconWidth/2);_4.style(this.pagerContainerStatus,"paddingLeft",_2c+"px");}else{if(this.statusPos=="trailing"){if(this.pagerPos=="center"){var _2d=_4.style(this.pagerContainer,"width");var _2e=_4.style(this.pagerContainerStatus,"width");_4.style(this.pagerContainerPager,"left",((_2d/2)-(_2e/2))+"px");}_4.style(this.pagerContainerStatus,"right","0px");}else{if(this.pagerPos=="center"){var _2d=_4.style(this.pagerContainer,"width");var _2e=_4.style(this.pagerContainerStatus,"width");_4.style(this.pagerContainerPager,"right",((_2d/2)-(_2e/2))+"px");}_4.style(this.pagerContainerStatus,"left","0px");}var _2c=(_4.style(this.pagerContainer,"height")/2)-(this.iconHeight/2);_4.style(this.pagerContainerStatus,"paddingTop",_2c+"px");}}_4.disconnect(this._iconConnects[_29]);},_27));if(i==this._currentPage){_26.src=this.iconPageActive;}else{_26.src=this.iconPage;}var _27=i;_4.addClass(_26,this.orientation+"PagerIcon");_4.attr(_26,"id",this.id+"-status-"+i);this.pagerContainerStatus.appendChild(_26);if(this.orientation=="vertical"){_4.style(_26,"display","block");}}},_pagerSkip:function(_2f){if(this._currentPage==_2f){return;}else{var _30;var _31;if(_2f<this._currentPage){_30=this._currentPage-_2f;_31=(this._totalPages+_2f)-this._currentPage;}else{_30=(this._totalPages+this._currentPage)-_2f;_31=_2f-this._currentPage;}var b=(_31>_30);this._toScroll=(b?_30:_31);var cmd=(b?"_pagerPrevious":"_pagerNext");var _32=this.connect(this,"onScrollEnd",function(){this._toScroll--;if(this._toScroll<1){this.disconnect(_32);}else{this[cmd]();}});this[cmd]();}},_pagerNext:function(){if(this._anim){return;}var _33=[];for(var i=this._currentPage*this.itemsPage;i>(this._currentPage-1)*this.itemsPage;i--){if(!_4.byId(this.id+"-item-"+i)){continue;}var _34=_4.byId(this.id+"-item-"+i);var _35=_4.marginBox(_34);if(this.orientation=="horizontal"){var _36=_35.l-(this.itemsPage*_35.w);_33.push(_4.fx.slideTo({node:_34,left:_36,duration:this.duration}));}else{var _36=_35.t-(this.itemsPage*_35.h);_33.push(_4.fx.slideTo({node:_34,top:_36,duration:this.duration}));}}var _37=this._currentPage;if(this._currentPage==this._totalPages){this._currentPage=1;}else{this._currentPage++;}var cnt=this.itemsPage;for(var i=this._currentPage*this.itemsPage;i>(this._currentPage-1)*this.itemsPage;i--){if(_4.byId(this.id+"-item-"+i)){var _34=_4.byId(this.id+"-item-"+i);var _35=_4.marginBox(_34);if(this.orientation=="horizontal"){var _38=(_4.style(this.pagerContainerView,"width")+((cnt-1)*_35.w))-1;_4.style(_34,"left",_38+"px");_4.style(_34,"top","0px");var _36=_38-(this.itemsPage*_35.w);_33.push(_4.fx.slideTo({node:_34,left:_36,duration:this.duration}));}else{_38=(_4.style(this.pagerContainerView,"height")+((cnt-1)*_35.h))-1;_4.style(_34,"top",_38+"px");_4.style(_34,"left","0px");var _36=_38-(this.itemsPage*_35.h);_33.push(_4.fx.slideTo({node:_34,top:_36,duration:this.duration}));}}cnt--;}this._anim=_4.fx.combine(_33);var _39=this.connect(this._anim,"onEnd",function(){delete this._anim;this.onScrollEnd();this.disconnect(_39);});this._anim.play();_4.byId(this.id+"-status-"+_37).src=this.iconPage;_4.byId(this.id+"-status-"+this._currentPage).src=this.iconPageActive;},_pagerPrevious:function(){if(this._anim){return;}var _3a=[];for(var i=this._currentPage*this.itemsPage;i>(this._currentPage-1)*this.itemsPage;i--){if(!_4.byId(this.id+"-item-"+i)){continue;}var _3b=_4.byId(this.id+"-item-"+i);var _3c=_4.marginBox(_3b);if(this.orientation=="horizontal"){var _3d=_4.style(_3b,"left")+(this.itemsPage*_3c.w);_3a.push(_4.fx.slideTo({node:_3b,left:_3d,duration:this.duration}));}else{var _3d=_4.style(_3b,"top")+(this.itemsPage*_3c.h);_3a.push(_4.fx.slideTo({node:_3b,top:_3d,duration:this.duration}));}}var _3e=this._currentPage;if(this._currentPage==1){this._currentPage=this._totalPages;}else{this._currentPage--;}var cnt=this.itemsPage;var j=1;for(var i=this._currentPage*this.itemsPage;i>(this._currentPage-1)*this.itemsPage;i--){if(_4.byId(this.id+"-item-"+i)){var _3b=_4.byId(this.id+"-item-"+i);var _3c=_4.marginBox(_3b);if(this.orientation=="horizontal"){var _3f=-(j*_3c.w)+1;_4.style(_3b,"left",_3f+"px");_4.style(_3b,"top","0px");var _3d=((cnt-1)*_3c.w);_3a.push(_4.fx.slideTo({node:_3b,left:_3d,duration:this.duration}));var _3d=_3f+(this.itemsPage*_3c.w);_3a.push(_4.fx.slideTo({node:_3b,left:_3d,duration:this.duration}));}else{_3f=-((j*_3c.h)+1);_4.style(_3b,"top",_3f+"px");_4.style(_3b,"left","0px");var _3d=((cnt-1)*_3c.h);_3a.push(_4.fx.slideTo({node:_3b,top:_3d,duration:this.duration}));}}cnt--;j++;}this._anim=_4.fx.combine(_3a);var _40=_4.connect(this._anim,"onEnd",_4.hitch(this,function(){delete this._anim;this.onScrollEnd();_4.disconnect(_40);}));this._anim.play();_4.byId(this.id+"-status-"+_3e).src=this.iconPage;_4.byId(this.id+"-status-"+this._currentPage).src=this.iconPageActive;},onScrollEnd:function(){}});_4.declare("dojox.widget._PagerItem",[_5._Widget,_5._Templated],{templateString:"<li class=\"pagerItem\" dojoAttachPoint=\"containerNode\"></li>",resizeChildren:function(){var box=_4.marginBox(this.containerNode);_4.style(this.containerNode.firstChild,{width:box.w+"px",height:box.h+"px"});},parseChildren:function(){_4.parser.parse(this.containerNode);}});}}};});