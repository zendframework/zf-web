/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.dtl.tag.logic"],["require","dojox.dtl._base"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.dtl.tag.logic"]){_4._hasResource["dojox.dtl.tag.logic"]=true;_4.provide("dojox.dtl.tag.logic");_4.require("dojox.dtl._base");(function(){var dd=_6.dtl;var _7=dd.text;var _8=dd.tag.logic;_8.IfNode=_4.extend(function(_9,_a,_b,_c){this.bools=_9;this.trues=_a;this.falses=_b;this.type=_c;},{render:function(_d,_e){var i,_f,_10,_11,_12;if(this.type=="or"){for(i=0;_f=this.bools[i];i++){_10=_f[0];_11=_f[1];_12=_11.resolve(_d);if((_12&&!_10)||(_10&&!_12)){if(this.falses){_e=this.falses.unrender(_d,_e);}return (this.trues)?this.trues.render(_d,_e,this):_e;}}if(this.trues){_e=this.trues.unrender(_d,_e);}return (this.falses)?this.falses.render(_d,_e,this):_e;}else{for(i=0;_f=this.bools[i];i++){_10=_f[0];_11=_f[1];_12=_11.resolve(_d);if(_12==_10){if(this.trues){_e=this.trues.unrender(_d,_e);}return (this.falses)?this.falses.render(_d,_e,this):_e;}}if(this.falses){_e=this.falses.unrender(_d,_e);}return (this.trues)?this.trues.render(_d,_e,this):_e;}return _e;},unrender:function(_13,_14){_14=(this.trues)?this.trues.unrender(_13,_14):_14;_14=(this.falses)?this.falses.unrender(_13,_14):_14;return _14;},clone:function(_15){var _16=(this.trues)?this.trues.clone(_15):null;var _17=(this.falses)?this.falses.clone(_15):null;return new this.constructor(this.bools,_16,_17,this.type);}});_8.IfEqualNode=_4.extend(function(_18,_19,_1a,_1b,_1c){this.var1=new dd._Filter(_18);this.var2=new dd._Filter(_19);this.trues=_1a;this.falses=_1b;this.negate=_1c;},{render:function(_1d,_1e){var _1f=this.var1.resolve(_1d);var _20=this.var2.resolve(_1d);_1f=(typeof _1f!="undefined")?_1f:"";_20=(typeof _1f!="undefined")?_20:"";if((this.negate&&_1f!=_20)||(!this.negate&&_1f==_20)){if(this.falses){_1e=this.falses.unrender(_1d,_1e,this);}return (this.trues)?this.trues.render(_1d,_1e,this):_1e;}if(this.trues){_1e=this.trues.unrender(_1d,_1e,this);}return (this.falses)?this.falses.render(_1d,_1e,this):_1e;},unrender:function(_21,_22){return _8.IfNode.prototype.unrender.call(this,_21,_22);},clone:function(_23){var _24=this.trues?this.trues.clone(_23):null;var _25=this.falses?this.falses.clone(_23):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_24,_25,this.negate);}});_8.ForNode=_4.extend(function(_26,_27,_28,_29){this.assign=_26;this.loop=new dd._Filter(_27);this.reversed=_28;this.nodelist=_29;this.pool=[];},{render:function(_2a,_2b){var i,j,k;var _2c=false;var _2d=this.assign;for(k=0;k<_2d.length;k++){if(typeof _2a[_2d[k]]!="undefined"){_2c=true;_2a=_2a.push();break;}}if(!_2c&&_2a.forloop){_2c=true;_2a=_2a.push();}var _2e=this.loop.resolve(_2a)||[];for(i=_2e.length;i<this.pool.length;i++){this.pool[i].unrender(_2a,_2b,this);}if(this.reversed){_2e=_2e.slice(0).reverse();}var _2f=_4.isObject(_2e)&&!_4.isArrayLike(_2e);var _30=[];if(_2f){for(var key in _2e){_30.push(_2e[key]);}}else{_30=_2e;}var _31=_2a.forloop={parentloop:_2a.get("forloop",{})};var j=0;for(i=0;i<_30.length;i++){var _32=_30[i];_31.counter0=j;_31.counter=j+1;_31.revcounter0=_30.length-j-1;_31.revcounter=_30.length-j;_31.first=!j;_31.last=(j==_30.length-1);if(_2d.length>1&&_4.isArrayLike(_32)){if(!_2c){_2c=true;_2a=_2a.push();}var _33={};for(k=0;k<_32.length&&k<_2d.length;k++){_33[_2d[k]]=_32[k];}_4.mixin(_2a,_33);}else{_2a[_2d[0]]=_32;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_2b));}_2b=this.pool[j++].render(_2a,_2b,this);}delete _2a.forloop;if(_2c){_2a=_2a.pop();}else{for(k=0;k<_2d.length;k++){delete _2a[_2d[k]];}}return _2b;},unrender:function(_34,_35){for(var i=0,_36;_36=this.pool[i];i++){_35=_36.unrender(_34,_35);}return _35;},clone:function(_37){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_37));}});_4.mixin(_8,{if_:function(_38,_39){var i,_3a,_3b,_3c=[],_3d=_39.contents.split();_3d.shift();_39=_3d.join(" ");_3d=_39.split(" and ");if(_3d.length==1){_3b="or";_3d=_39.split(" or ");}else{_3b="and";for(i=0;i<_3d.length;i++){if(_3d[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;_3a=_3d[i];i++){var not=false;if(_3a.indexOf("not ")==0){_3a=_3a.slice(4);not=true;}_3c.push([not,new dd._Filter(_3a)]);}var _3e=_38.parse(["else","endif"]);var _3f=false;var _39=_38.next_token();if(_39.contents=="else"){_3f=_38.parse(["endif"]);_38.next_token();}return new _8.IfNode(_3c,_3e,_3f,_3b);},_ifequal:function(_40,_41,_42){var _43=_41.split_contents();if(_43.length!=3){throw new Error(_43[0]+" takes two arguments");}var end="end"+_43[0];var _44=_40.parse(["else",end]);var _45=false;var _41=_40.next_token();if(_41.contents=="else"){_45=_40.parse([end]);_40.next_token();}return new _8.IfEqualNode(_43[1],_43[2],_44,_45,_42);},ifequal:function(_46,_47){return _8._ifequal(_46,_47);},ifnotequal:function(_48,_49){return _8._ifequal(_48,_49,true);},for_:function(_4a,_4b){var _4c=_4b.contents.split();if(_4c.length<4){throw new Error("'for' statements should have at least four words: "+_4b.contents);}var _4d=_4c[_4c.length-1]=="reversed";var _4e=(_4d)?-3:-2;if(_4c[_4c.length+_4e]!="in"){throw new Error("'for' tag received an invalid argument: "+_4b.contents);}var _4f=_4c.slice(1,_4e).join(" ").split(/ *, */);for(var i=0;i<_4f.length;i++){if(!_4f[i]||_4f[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_4b.contents);}}var _50=_4a.parse(["endfor"]);_4a.next_token();return new _8.ForNode(_4f,_4c[_4c.length+_4e+1],_4d,_50);}});})();}}};});