/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.secure.DOM"],["require","dojox.lang.observable"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.secure.DOM"]){_4._hasResource["dojox.secure.DOM"]=true;_4.provide("dojox.secure.DOM");_4.require("dojox.lang.observable");_6.secure.DOM=function(_7){function _8(_9){if(!_9){return _9;}var _a=_9;do{if(_a==_7){return _b(_9);}}while((_a=_a.parentNode));return null;};function _b(_c){if(_c){if(_c.nodeType){var _d=_e(_c);if(_c.nodeType==1&&typeof _d.style=="function"){_d.style=_f(_c.style);_d.ownerDocument=_10;_d.childNodes={__get__:function(i){return _b(_c.childNodes[i]);},length:0};}return _d;}if(_c&&typeof _c=="object"){if(_c.__observable){return _c.__observable;}_d=_c instanceof Array?[]:{};_c.__observable=_d;for(var i in _c){if(i!="__observable"){_d[i]=_b(_c[i]);}}_d.data__=_c;return _d;}if(typeof _c=="function"){var _11=function(_12){if(typeof _12=="function"){return function(){for(var i=0;i<arguments.length;i++){arguments[i]=_b(arguments[i]);}return _11(_12.apply(_b(this),arguments));};}return _6.secure.unwrap(_12);};return function(){if(_c.safetyCheck){_c.safetyCheck.apply(_11(this),arguments);}for(var i=0;i<arguments.length;i++){arguments[i]=_11(arguments[i]);}return _b(_c.apply(_11(this),arguments));};}}return _c;};unwrap=_6.secure.unwrap;function _13(css){css+="";if(css.match(/behavior:|content:|javascript:|binding|expression|\@import/)){throw new Error("Illegal CSS");}var id=_7.id||(_7.id="safe"+(""+Math.random()).substring(2));return css.replace(/(\}|^)\s*([^\{]*\{)/g,function(t,a,b){return a+" #"+id+" "+b;});};function _14(url){if(url.match(/:/)&&!url.match(/^(http|ftp|mailto)/)){throw new Error("Unsafe URL "+url);}};function _15(el){if(el&&el.nodeType==1){if(el.tagName.match(/script/i)){var src=el.src;if(src&&src!=""){el.parentNode.removeChild(el);_4.xhrGet({url:src,secure:true}).addCallback(function(_16){_10.evaluate(_16);});}else{var _17=el.innerHTML;el.parentNode.removeChild(el);_b.evaluate(_17);}}if(el.tagName.match(/link/i)){throw new Error("illegal tag");}if(el.tagName.match(/style/i)){var _18=function(_19){if(el.styleSheet){el.styleSheet.cssText=_19;}else{var _1a=doc.createTextNode(_19);if(el.childNodes[0]){el.replaceChild(_1a,el.childNodes[0]);}else{el.appendChild(_1a);}}};src=el.src;if(src&&src!=""){alert("src"+src);el.src=null;_4.xhrGet({url:src,secure:true}).addCallback(function(_1b){_18(_13(_1b));});}_18(_13(el.innerHTML));}if(el.style){_13(el.style.cssText);}if(el.href){_14(el.href);}if(el.src){_14(el.src);}var _1c,i=0;while((_1c=el.attributes[i++])){if(_1c.name.substring(0,2)=="on"&&_1c.value!="null"&&_1c.value!=""){throw new Error("event handlers not allowed in the HTML, they must be set with element.addEventListener");}}var _1d=el.childNodes;for(var i=0,l=_1d.length;i<l;i++){_15(_1d[i]);}}};function _1e(_1f){var div=document.createElement("div");if(_1f.match(/<object/i)){throw new Error("The object tag is not allowed");}div.innerHTML=_1f;_15(div);return div;};var doc=_7.ownerDocument;var _10={getElementById:function(id){return _8(doc.getElementById(id));},createElement:function(_20){return _b(doc.createElement(_20));},createTextNode:function(_21){return _b(doc.createTextNode(_21));},write:function(str){var div=_1e(str);while(div.childNodes.length){_7.appendChild(div.childNodes[0]);}}};_10.open=_10.close=function(){};var _22={innerHTML:function(_23,_24){console.log("setting innerHTML");_23.innerHTML=_1e(_24).innerHTML;}};_22.outerHTML=function(_25,_26){throw new Error("Can not set this property");};function _27(_28,_29){return function(_2a,_2b){_15(_2b[_29]);return _2a[_28](_2b[0]);};};var _2c={appendChild:_27("appendChild",0),insertBefore:_27("insertBefore",0),replaceChild:_27("replaceChild",1),cloneNode:function(_2d,_2e){return _2d.cloneNode(_2e[0]);},addEventListener:function(_2f,_30){_4.connect(_2f,"on"+_30[0],this,function(_31){_31=_e(_31||window.event);_30[1].call(this,_31);});}};_2c.childNodes=_2c.style=_2c.ownerDocument=function(){};function _32(_33){return _6.lang.makeObservable(function(_34,_35){var _36;return _34[_35];},_33,function(_37,_38,_39,_3a){for(var i=0;i<_3a.length;i++){_3a[i]=unwrap(_3a[i]);}if(_2c[_39]){return _b(_2c[_39].call(_37,_38,_3a));}return _b(_38[_39].apply(_38,_3a));},_2c);};var _e=_32(function(_3b,_3c,_3d){if(_22[_3c]){_22[_3c](_3b,_3d);}_3b[_3c]=_3d;});var _3e={behavior:1,MozBinding:1};var _f=_32(function(_3f,_40,_41){if(!_3e[_40]){_3f[_40]=_13(_41);}});_b.safeHTML=_1e;_b.safeCSS=_13;return _b;};_6.secure.unwrap=function unwrap(_42){return (_42&&_42.data__)||_42;};}}};});