/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.form.manager._NodeMixin"],["require","dojox.form.manager._Mixin"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.form.manager._NodeMixin"]){_4._hasResource["dojox.form.manager._NodeMixin"]=true;_4.provide("dojox.form.manager._NodeMixin");_4.require("dojox.form.manager._Mixin");(function(){var fm=_6.form.manager,aa=fm.actionAdapter,_7=fm._keys,ce=fm.changeEvent=function(_8){var _9="onclick";switch(_8.tagName.toLowerCase()){case "textarea":_9="onkeyup";break;case "select":_9="onchange";break;case "input":switch(_8.type.toLowerCase()){case "text":case "password":_9="onkeyup";break;}break;}return _9;},_a=function(_b,_c){var _d=_4.attr(_b,"name");_c=_c||this.domNode;if(_d&&!(_d in this.formWidgets)){for(var n=_b;n&&n!==_c;n=n.parentNode){if(_4.attr(n,"widgetId")&&_5.byNode(n) instanceof _5.form._FormWidget){return null;}}if(_b.tagName.toLowerCase()=="input"&&_b.type.toLowerCase()=="radio"){var a=this.formNodes[_d];a=a&&a.node;if(a&&_4.isArray(a)){a.push(_b);}else{this.formNodes[_d]={node:[_b],connections:[]};}}else{this.formNodes[_d]={node:_b,connections:[]};}}else{_d=null;}return _d;},_e=function(_f){var _10={};aa(function(_11,n){var o=_4.attr(n,"observer");if(o&&typeof o=="string"){_4.forEach(o.split(","),function(o){o=_4.trim(o);if(o&&_4.isFunction(this[o])){_10[o]=1;}},this);}}).call(this,null,this.formNodes[_f].node);return _7(_10);},_12=function(_13,_14){var t=this.formNodes[_13],c=t.connections;if(c.length){_4.forEach(c,_4.disconnect);c=t.connections=[];}aa(function(_15,n){var _16=ce(n);_4.forEach(_14,function(o){c.push(_4.connect(n,_16,this,function(evt){if(this.watch){this[o](this.formNodeValue(_13),_13,n,evt);}}));},this);}).call(this,null,t.node);};_4.declare("dojox.form.manager._NodeMixin",null,{destroy:function(){for(var _17 in this.formNodes){_4.forEach(this.formNodes[_17].connections,_4.disconnect);}this.formNodes={};this.inherited(arguments);},registerNode:function(_18){if(typeof _18=="string"){_18=_4.byId(_18);}var _19=_a.call(this,_18);if(_19){_12.call(this,_19,_e.call(this,_19));}return this;},unregisterNode:function(_1a){if(_1a in this.formNodes){_4.forEach(this.formNodes[_1a].connections,this.disconnect,this);delete this.formNodes[_1a];}return this;},registerNodeDescendants:function(_1b){if(typeof _1b=="string"){_1b=_4.byId(_1b);}_4.query("input, select, textarea, button",_1b).map(function(n){return _a.call(this,n,_1b);},this).forEach(function(_1c){if(_1c){_12.call(this,_1c,_e.call(this,_1c));}},this);return this;},unregisterNodeDescendants:function(_1d){if(typeof _1d=="string"){_1d=_4.byId(_1d);}_4.query("input, select, textarea, button",_1d).map(function(n){return _4.attr(_1d,"name")||null;}).forEach(function(_1e){if(_1e){this.unregisterNode(_1e);}},this);return this;},formNodeValue:function(_1f,_20){var _21=arguments.length==2&&_20!==undefined,_22;if(typeof _1f=="string"){_1f=this.formNodes[_1f];if(_1f){_1f=_1f.node;}}if(!_1f){return null;}if(_4.isArray(_1f)){if(_21){_4.forEach(_1f,function(_23){_23.checked="";});_4.forEach(_1f,function(_24){_24.checked=_24.value===_20?"checked":"";});return this;}_4.some(_1f,function(_25){if(_25.checked){_22=_25;return true;}return false;});return _22?_22.value:"";}switch(_1f.tagName.toLowerCase()){case "select":if(_1f.multiple){if(_21){if(_4.isArray(_20)){var _26={};_4.forEach(_20,function(v){_26[v]=1;});_4.query("> option",_1f).forEach(function(opt){opt.selected=opt.value in _26;});return this;}_4.query("> option",_1f).forEach(function(opt){opt.selected=opt.value===_20;});return this;}var _22=_4.query("> option",_1f).filter(function(opt){return opt.selected;}).map(function(opt){return opt.value;});return _22.length==1?_22[0]:_22;}if(_21){_4.query("> option",_1f).forEach(function(opt){opt.selected=opt.value===_20;});return this;}return _1f.value||"";case "button":if(_21){_1f.innerHTML=""+_20;return this;}return _1f.innerHTML;case "input":if(_1f.type.toLowerCase()=="checkbox"){if(_21){_1f.checked=_20?"checked":"";return this;}return Boolean(_1f.checked);}}if(_21){_1f.value=""+_20;return this;}return _1f.value;},inspectFormNodes:function(_27,_28,_29){var _2a,_2b={};if(_28){if(_4.isArray(_28)){_4.forEach(_28,function(_2c){if(_2c in this.formNodes){_2b[_2c]=_27.call(this,_2c,this.formNodes[_2c].node,_29);}},this);}else{for(_2a in _28){if(_2a in this.formNodes){_2b[_2a]=_27.call(this,_2a,this.formNodes[_2a].node,_28[_2a]);}}}}else{for(_2a in this.formNodes){_2b[_2a]=_27.call(this,_2a,this.formNodes[_2a].node,_29);}}return _2b;}});})();}}};});