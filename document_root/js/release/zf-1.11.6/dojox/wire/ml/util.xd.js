/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.wire.ml.util"],["require","dojox.xml.parser"],["require","dojox.wire.Wire"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.wire.ml.util"]){_4._hasResource["dojox.wire.ml.util"]=true;_4.provide("dojox.wire.ml.util");_4.require("dojox.xml.parser");_4.require("dojox.wire.Wire");_6.wire.ml._getValue=function(_7,_8){if(!_7){return undefined;}var _9=undefined;if(_8&&_7.length>=9&&_7.substring(0,9)=="arguments"){_9=_7.substring(9);return new _6.wire.Wire({property:_9}).getValue(_8);}var i=_7.indexOf(".");if(i>=0){_9=_7.substring(i+1);_7=_7.substring(0,i);}var _a=(_5.byId(_7)||_4.byId(_7)||_4.getObject(_7));if(!_a){return undefined;}if(!_9){return _a;}else{return new _6.wire.Wire({object:_a,property:_9}).getValue();}};_6.wire.ml._setValue=function(_b,_c){if(!_b){return;}var i=_b.indexOf(".");if(i<0){return;}var _d=this._getValue(_b.substring(0,i));if(!_d){return;}var _e=_b.substring(i+1);var _f=new _6.wire.Wire({object:_d,property:_e}).setValue(_c);};_4.declare("dojox.wire.ml.XmlElement",null,{constructor:function(_10){if(_4.isString(_10)){_10=this._getDocument().createElement(_10);}this.element=_10;},getPropertyValue:function(_11){var _12=undefined;if(!this.element){return _12;}if(!_11){return _12;}if(_11.charAt(0)=="@"){var _13=_11.substring(1);_12=this.element.getAttribute(_13);}else{if(_11=="text()"){var _14=this.element.firstChild;if(_14){_12=_14.nodeValue;}}else{var _15=[];for(var i=0;i<this.element.childNodes.length;i++){var _16=this.element.childNodes[i];if(_16.nodeType===1&&_16.nodeName==_11){_15.push(new _6.wire.ml.XmlElement(_16));}}if(_15.length>0){if(_15.length===1){_12=_15[0];}else{_12=_15;}}}}return _12;},setPropertyValue:function(_17,_18){var i;var _19;if(!this.element){return;}if(!_17){return;}if(_17.charAt(0)=="@"){var _1a=_17.substring(1);if(_18){this.element.setAttribute(_1a,_18);}else{this.element.removeAttribute(_1a);}}else{if(_17=="text()"){while(this.element.firstChild){this.element.removeChild(this.element.firstChild);}if(_18){_19=this._getDocument().createTextNode(_18);this.element.appendChild(_19);}}else{var _1b=null;var _1c;for(i=this.element.childNodes.length-1;i>=0;i--){_1c=this.element.childNodes[i];if(_1c.nodeType===1&&_1c.nodeName==_17){if(!_1b){_1b=_1c.nextSibling;}this.element.removeChild(_1c);}}if(_18){if(_4.isArray(_18)){for(i in _18){var e=_18[i];if(e.element){this.element.insertBefore(e.element,_1b);}}}else{if(_18 instanceof _6.wire.ml.XmlElement){if(_18.element){this.element.insertBefore(_18.element,_1b);}}else{_1c=this._getDocument().createElement(_17);_19=this._getDocument().createTextNode(_18);_1c.appendChild(_19);this.element.insertBefore(_1c,_1b);}}}}}},toString:function(){var s="";if(this.element){var _1d=this.element.firstChild;if(_1d){s=_1d.nodeValue;}}return s;},toObject:function(){if(!this.element){return null;}var _1e="";var obj={};var _1f=0;var i;for(i=0;i<this.element.childNodes.length;i++){var _20=this.element.childNodes[i];if(_20.nodeType===1){_1f++;var o=new _6.wire.ml.XmlElement(_20).toObject();var _21=_20.nodeName;var p=obj[_21];if(!p){obj[_21]=o;}else{if(_4.isArray(p)){p.push(o);}else{obj[_21]=[p,o];}}}else{if(_20.nodeType===3||_20.nodeType===4){_1e+=_20.nodeValue;}}}var _22=0;if(this.element.nodeType===1){_22=this.element.attributes.length;for(i=0;i<_22;i++){var _23=this.element.attributes[i];obj["@"+_23.nodeName]=_23.nodeValue;}}if(_1f===0){if(_22===0){return _1e;}obj["text()"]=_1e;}return obj;},_getDocument:function(){if(this.element){return (this.element.nodeType==9?this.element:this.element.ownerDocument);}else{return _6.xml.parser.parse();}}});}}};});