<h2>ZF-2459: Zend_Session fails under Windows</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Unit Tests: Problem</dd>

    <dt>Created:</dt>
    <dd>2008-01-20T09:37:32.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2008-02-26T12:55:58.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul>        <li>1.0.4 (26/Feb/08)</li>
    </ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Darby Felton (darby)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Session</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>Running alltests under windows fails at Zend_Session and gives the following in return:</p>

<pre class="highlight"><code>
C:\Voxtronic\3rdParty\Zend Framework\tests&gt;phpunit --verbose AllTests

Notice: Class PHPUnit_Extensions_ExceptionTestCase is deprecated. It will be rem
oved in PHPUnit 4.0. The functionality has been merged into PHPUnit_Framework_Te
stCase. in C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\Extensions\ExceptionTestCase.p
hp on line 56

Call Stack:
    0.0021     178240   1. {main}() C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\TextU
I\Command.php:0
    0.9280    7804528   2. PHPUnit_TextUI_Command::main() C:\Voxtronic\3rdParty\
php\PEAR\PHPUnit\TextUI\Command.php:528
    0.9287    7812968   3. PHPUnit_Runner_BaseTestRunner-&gt;getTest() C:\Voxtronic
\3rdParty\php\PEAR\PHPUnit\TextUI\Command.php:90
    0.9287    7813904   4. PHPUnit_Runner_BaseTestRunner-&gt;loadSuiteClass() C:\Vo
xtronic\3rdParty\php\PEAR\PHPUnit\Runner\BaseTestRunner.php:200
    0.9287    7814032   5. PHPUnit_Runner_StandardTestSuiteLoader-&gt;load() C:\Vox
tronic\3rdParty\php\PEAR\PHPUnit\Runner\BaseTestRunner.php:269
    0.9303    7814968   6. PHPUnit_Util_Fileloader::checkAndLoad() C:\Voxtronic\
3rdParty\php\PEAR\PHPUnit\Runner\StandardTestSuiteLoader.php:97
    1.1384    7815584   7. PHPUnit_Util_Fileloader::load() C:\Voxtronic\3rdParty
\php\PEAR\PHPUnit\Util\Fileloader.php:105
    1.1398    7828808   8. include_once('C:\Voxtronic\3rdParty\Zend Framework\te
sts\AllTests.php') C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\Util\Fileloader.php:12
9
   14.4004    8091104   9. require_once('C:\Voxtronic\3rdParty\Zend Framework\te
sts\Zend\AllTests.php') C:\Voxtronic\3rdParty\Zend Framework\tests\AllTests.php:
34
   15.7199   33116264  10. require_once('C:\Voxtronic\3rdParty\Zend Framework\te
sts\Zend\Gdata\AllTests.php') C:\Voxtronic\3rdParty\Zend Framework\tests\Zend\Al
lTests.php:48
   16.2495   39397552  11. require_once('C:\Voxtronic\3rdParty\Zend Framework\te
sts\Zend\Gdata\Calendar\EventQueryExceptionTest.php') C:\Voxtronic\3rdParty\Zend
 Framework\tests\Zend\Gdata\AllTests.php:83
   16.2565   39428936  12. require_once('C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\
Extensions\ExceptionTestCase.php') C:\Voxtronic\3rdParty\Zend Framework\tests\Ze
nd\Gdata\Calendar\EventQueryExceptionTest.php:25
   16.2607   39429408  13. trigger_error() C:\Voxtronic\3rdParty\php\PEAR\PHPUni
t\Extensions\ExceptionTestCase.php:56


Zend_Session_Exception: Session must be started before any output has been sent
to the browser; output started in C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\Extensi
ons\ExceptionTestCase.php/56 in C:\Voxtronic\3rdParty\Zend Framework\library\Zen
d\Session.php on line 362

Call Stack:
    0.0021     178240   1. {main}() C:\Voxtronic\3rdParty\php\PEAR\PHPUnit\TextU
I\Command.php:0
    0.9280    7804528   2. PHPUnit_TextUI_Command::main() C:\Voxtronic\3rdParty\
php\PEAR\PHPUnit\TextUI\Command.php:528
    0.9287    7812968   3. PHPUnit_Runner_BaseTestRunner-&gt;getTest() C:\Voxtronic
\3rdParty\php\PEAR\PHPUnit\TextUI\Command.php:90
   20.2667   93137424   4. ReflectionMethod-&gt;invoke() C:\Voxtronic\3rdParty\php\
PEAR\PHPUnit\Runner\BaseTestRunner.php:220
   20.2667   93137424   5. AllTests::suite() C:\Voxtronic\3rdParty\Zend Framewor
k\tests\AllTests.php:0
   20.2667   93137672   6. Zend_AllTests::suite() C:\Voxtronic\3rdParty\Zend Fra
mework\tests\AllTests.php:58
   23.3080  103088168   7. Zend_OpenId_AllTests::suite() C:\Voxtronic\3rdParty\Z
end Framework\tests\Zend\AllTests.php:134
   23.3237  103111224   8. PHPUnit_Framework_TestSuite-&gt;addTestSuite() C:\Voxtro
nic\3rdParty\Zend Framework\tests\Zend\OpenId\AllTests.php:49
   23.3237  103112480   9. PHPUnit_Framework_TestSuite-&gt;__construct() C:\Voxtron
ic\3rdParty\php\PEAR\PHPUnit\Framework\TestSuite.php:324
   23.3271  103148176  10. PHPUnit_Framework_TestSuite-&gt;addTestMethod() C:\Voxtr
onic\3rdParty\php\PEAR\PHPUnit\Framework\TestSuite.php:229
   23.3271  103148640  11. PHPUnit_Framework_TestSuite::createTest() C:\Voxtroni
c\3rdParty\php\PEAR\PHPUnit\Framework\TestSuite.php:757
   23.3272  103152824  12. Zend_OpenId_ProviderTest-&gt;__construct() C:\Voxtronic\
3rdParty\php\PEAR\PHPUnit\Framework\TestSuite.php:496
   23.3272  103152960  13. Zend_OpenId_Provider_User_Session-&gt;__construct() C:\V
oxtronic\3rdParty\Zend Framework\tests\Zend\OpenId\ProviderTest.php:55
   23.3272  103153264  14. Zend_Session_Namespace-&gt;__construct() C:\Voxtronic\3r
dParty\Zend Framework\library\Zend\OpenId\Provider\User\Session.php:62
   23.3272  103156528  15. Zend_Session::start() C:\Voxtronic\3rdParty\Zend Fram
ework\library\Zend\Session\Namespace.php:116
</code></pre>

<p>Running Zend_Session_AllTests independently does also fail because the testbed runs infinite.
Using:
PHP 5.2.5, Apache 2.2, PHPUNIT 3.2.7</p>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Martin Hujer (mhujer) on 2008-01-31T04:11:30.000+0000</p> 
        <div class="body">
            <p>I think, that this issue is similar to <a href="http://framework.zend.com/issues/browse/ZF-2282">ZF-2282</a></p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Darby Felton (darby) on 2008-02-12T08:32:51.000+0000</p> 
        <div class="body">
            <p>I can no longer reproduce this on the {{trunk}} or the {{release-1.0}} branch. I think it has been fixed. If this is not the case, please reopen with additional information (e.g., how to reproduce). Thanks! :)</p>

        </div>
    </div>
    </div>

