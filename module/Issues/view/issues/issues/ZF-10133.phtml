<h2>ZF-10133: for attribute of label for a hierarchical Zend_Form_Element_File element uses array notation</h2>

<dl class="metadata">
    <dt>Issue Type:</dt>
    <dd>Bug</dd>

    <dt>Created:</dt>
    <dd>2010-07-10T13:26:42.000+0000</dd>

    <dt>Last Updated:</dt>
    <dd>2010-12-24T13:50:49.000+0000</dd>

    <dt>Status:</dt>
    <dd>Resolved</dd>

    <dt>Fix version(s):</dt>
    <dd><ul></ul></dd>

    <dt>Reporter:</dt>
    <dd>
        None
                    </dd>

    <dt>Assignee:</dt>
    <dd>
                Thomas Weidner (thomas)
            </dd>

    <dt>Tags:</dt>
    <dd><ul>        <li>Zend_Form</li>
        </ul></dd>

    <dt>Related issues:</dt>
    <dd><ul>
    </ul></dd>

    <dt>Attachments:</dt>
    <dd><ul>
    </ul></dd>
</dl>

<div class="description">
    <h3>Description</h3>

    <div class="body">
        <p>The id and name for a Zend_Form_Element_File element will not be rendered using array notation (when they are part of  a subform or the belongsTo property is set). See ZF-5864 for the reasons behind doing so.</p>

<p>However the for attribute of an accompanying label still gets rendered as if array notation would be used, see the rendered html below:</p>

<pre class="highlight"><code>
</code></pre><div class="element"><code>
Picture (max 4MB each)
</code></div><code>
</code><div class="element"><code>
Caption
</code></div><code>
</code>

    </div>
</div>

<div class="comments">
    <h3>Comments</h3>

    <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-08-06T08:39:23.000+0000</p> 
        <div class="body">
            <p>As label and file element are different components I see no way of how label could be degraded when a file element is attached.</p>

<p>The problem is that the label does not know if it's attached to the file element, or if it's being displayed independently.</p>

<p>I would close this actually as won't fix as there is no known solution for now.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Erwin Derksen (erwind) on 2010-08-06T13:20:02.000+0000</p> 
        <div class="body">
            <p>A label should indeed not have to know what <em>type</em> of element is attached. It should just ask the element it belongs to what id it is going to use. This is exactly what the label does, so the error is not in the label.</p>

<p>If the error is not in the label then why does a file input element gets a different id then it says it has when asked for it? I think that this is because the code that changes the id (attribute rendering) is in the form file decorator and not in the form file element.</p>

<p>I think that the form file element should override getId and that the form file decorator should ask the id to render at the form file element. I think, this will result in a situation where both the label decorator and the form file decorator will use the same id. But I'm not completely convinced about this, as, frankly speaking, I have a hard time understanding the involved code.</p>

        </div>
    </div>
        <div class="comment">
        <p class="metadata">Posted by Thomas Weidner (thomas) on 2010-12-24T13:50:49.000+0000</p> 
        <div class="body">
            <p>Closing as won't fix.
An element should not change the behaviour of another used independent element.</p>

        </div>
    </div>
    </div>

